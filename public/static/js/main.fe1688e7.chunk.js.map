{"version":3,"sources":["context/userContext.ts","firebaseApp.ts","components/UI/IconButton.tsx","components/UI/RaisedButton.tsx","components/FriendRequests.tsx","components/GameChallenges.tsx","components/Presence.tsx","components/Header.tsx","FirebaseMatchmakingManager.ts","components/GamePlacementGrid.tsx","components/Score.tsx","components/GameBoardSquare.tsx","pages/Game.tsx","components/AddFriends.tsx","components/FriendList.tsx","components/GameItem.tsx","components/GameList.tsx","pages/Home.tsx","pages/Login.tsx","components/Footer.tsx","App.tsx","theme.ts","index.tsx"],"names":["UserContext","React","createContext","user","displayName","friendCode","app","firebase","apiKey","process","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","auth","firestore","functions","IconButton","children","variantColor","isLoading","props","isDisabled","splitColor","split","colorGrade","parseInt","color","PseudoBox","as","d","bg","p","alignItems","borderRadius","borderBottomColor","Math","min","borderBottomWidth","transition","outline","position","_hover","backgroundColor","_focus","boxShadow","_active","mt","_disabled","opacity","cursor","Flex","Spinner","pos","top","left","w","h","RaisedButton","py","pb","px","aria-disabled","FriendRequests","useContext","friendsReqRef","useRef","useState","friendsReq","setFriendsReq","requestsLoading","setRequestsLoading","useEffect","unsubFriendsReq","collection","doc","uid","onSnapshot","query","docChanges","forEach","change","type","data","id","current","map","game","filter","acceptFriendRequest","userId","a","includes","ids","func","httpsCallable","console","error","declineFriendRequest","requestId","delete","Popover","Box","mr","src","alt","length","display","justifyContent","fontSize","fontWeight","right","zIndex","maxW","borderColor","List","friendReq","key","borderBottom","Text","whiteSpace","onClick","textShadow","GameChallenges","challengesRef","challenges","setChallenges","unsubChallenges","challenge","declineChallenge","challengeId","acceptChallenge","Presence","presenceRef","usersOnline","setUsersOnline","unsubPresence","addPresence","setupBeforeUnloadListener","deletePresence","set","lastOnline","FieldValue","serverTimestamp","log","window","addEventListener","ev","preventDefault","Heading","Header","align","justify","to","Menu","Avatar","size","name","undefined","border","signOut","FirebaseMatchmakingManager","matchmakingListener","joinQueue","created","exitQueue","subMatchmaking","success","includeMetadataChanges","unsubMatchmaking","xy","Array","from","defaultShipPosition","carrier","x","y","rotated","battleship","destroyer","submarine","patrol","shipLength","GamePlacementGrid","onShipsPlaced","gridRef","lastShipDragged","shipPlacement","setShipPlacement","shipDragPosition","setShipDragPosition","gridWidth","setGridWidth","isOverlapping","setIsOverlapping","bind","useGesture","onDrag","movement","mx","my","handleDrag","onDragStart","event","handleDragStart","target","onDragEnd","handleDragEnd","currentShipPlacement","newX","max","floor","newY","newPosition","domElement","dataset","ship","newPlacement","placementObject","Object","entries","reduce","acc","value","positions","_","index","flatArray","values","flat","Set","width","getBoundingClientRect","calculateYPosition","calculateXPosition","widthForShip","heightForShip","Grid","gridTemplateColumns","margin","ref","yArray","xIndex","checked","yIndex","paddingTop","keys","style","height","transform","data-ship","pt","flexDir","Button","currentShip","isRotated","rotateShip","Score","isOpponent","hits","skewDeg","hitColor","mb","GameBoardSquare","trySquare","isPersonalBoard","opponent","players","find","player","square","hit","flatMap","sunk","tried","tries","minW","backgroundRepeat","backgroundPosition","backgroundSize","backgroundImage","Game","toast","useToast","gameId","useParams","setGame","placement","setPlacement","canSendPlacement","setCanSendPlacement","isTrying","setIsTrying","showOwnBoard","setShowOwnBoard","personalPlacmenet","setPersonalPlacement","unsubGames","snapshot","get","then","catch","err","currentPlayer","title","description","status","duration","isClosable","trySquareFunc","response","isHit","gameIsWon","confirmPlacement","update","hasPlaced","direction","winner","state","textAlign","flexWrap","ml","AddFriends","searchQuery","setSearchQuery","foundUser","setFoundUser","loading","setLoading","searchForUsers","sendFriendRequest","publicUserSnapshot","exists","publicUser","onClose","handleAdd","Input","placeholder","_placeholder","onChange","Modal","isOpen","FriendList","friendsRef","friends","setFriends","challengesLoading","setChallengesLoading","unsubFriends","sendChallenge","friend","GameItem","opponentName","GameList","gamesRef","games","setGames","notStarted","playing","done","Home","onStartMatchmaking","onStopMatchmaking","isMatchmaking","time","templateColumns","base","md","gridGap","rounded","letterSpacing","Login","email","setEmail","password","setPassword","formError","setFormError","isLoggingIn","setIsLoggingIn","handleSubmit","signInWithEmailAndPassword","signInAnonymously","minH","onSubmit","FormControl","isInvalid","FormLabel","htmlFor","FormErrorMessage","message","Footer","Link","textDecoration","href","isExternal","Icon","matchmakingManager","App","setUser","timerRef","history","useHistory","setTime","setIsMatchmaking","initialLoad","setInitialLoad","startMatchmaking","startTimer","stopMatchmaking","push","setInterval","clearInterval","stopTimer","unsubAuth","onAuthStateChanged","userData","setUserData","unsubUserdata","overflow","Provider","background","path","customTheme","theme","fonts","heading","body","mono","ReactDOM","render","StrictMode","ThemeProvider","ColorModeProvider","CSSReset","document","getElementById"],"mappings":"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","file":"static/js/main.fe1688e7.chunk.js","sourcesContent":["import React from 'react'\nimport * as firebase from 'firebase'\n\ninterface UserContext {\n  user: firebase.User | null\n  displayName: string\n  friendCode: string\n}\n\nconst UserContext = React.createContext<UserContext>({\n  user: null,\n  displayName: '',\n  friendCode: '',\n})\nexport default UserContext\n","// Firebase App (the core Firebase SDK) is always required and must be listed first\nimport * as firebase from 'firebase/app'\n\n// If you enabled Analytics in your project, add the Firebase SDK for Analytics\n//import \"firebase/analytics\";\n\n// Add the Firebase products that you want to use\nimport 'firebase/auth'\nimport 'firebase/firestore'\nimport 'firebase/functions'\n\nconst firebaseConfig = {\n  apiKey: process.env.REACT_APP_FIREBASE_API_KEY,\n  authDomain: 'battleship-ish.firebaseapp.com',\n  databaseURL: 'https://battleship-ish.firebaseio.com',\n  projectId: 'battleship-ish',\n  storageBucket: 'battleship-ish.appspot.com',\n  messagingSenderId: '57723460313',\n  appId: '1:57723460313:web:f55fa72d03e38eea77bcc8',\n}\n// Initialize Firebase\nconst app = firebase.initializeApp(firebaseConfig)\n\nconst auth = app.auth()\nconst firestore = app.firestore()\nconst functions = app.functions('europe-west1')\n\nexport { auth, firestore, functions }\n","import React from 'react'\nimport { PseudoBox, PseudoBoxProps, ButtonProps, Flex, Spinner } from '@chakra-ui/core'\n\ninterface IconButton {\n  variantColor?: string\n}\n\nconst IconButton: React.FC<PseudoBoxProps & ButtonProps & IconButton> = ({\n  children,\n  variantColor = 'purple.300',\n  isLoading,\n  isDisabled,\n  ...props\n}) => {\n  const splitColor = variantColor.split('.')\n  const colorGrade = parseInt(splitColor[1], 10)\n  const color = splitColor[0]\n  return (\n    <PseudoBox\n      as=\"button\"\n      d=\"flex\"\n      bg={variantColor}\n      p={2}\n      alignItems=\"center\"\n      borderRadius={6}\n      borderBottomColor={`${color}.${Math.min(colorGrade + 100, 900)}`}\n      borderBottomWidth={4}\n      transition=\"all 0.2s ease\"\n      outline=\"none\"\n      position=\"relative\"\n      _hover={{\n        backgroundColor: `${color}.${Math.min(colorGrade + 100, 900)}`,\n        borderBottomColor: `${color}.${Math.min(colorGrade + 200, 900)}`,\n      }}\n      _focus={{\n        boxShadow: 'outline',\n      }}\n      _active={{\n        borderBottomWidth: '2px',\n        mt: '2px',\n      }}\n      _disabled={{\n        opacity: 0.5,\n        cursor: 'not-allowed',\n      }}\n      {...props}\n    >\n      <Flex opacity={isLoading ? 0 : 1}>{children}</Flex>\n      <Spinner\n        opacity={isLoading ? 1 : 0}\n        pos=\"absolute\"\n        top=\"calc(50% - 12px)\"\n        left=\"calc(50% - 12px)\"\n        w=\"24px\"\n        h=\"24px\"\n      />\n    </PseudoBox>\n  )\n}\n\nexport default IconButton\n","import React from 'react'\nimport { PseudoBox, PseudoBoxProps, ButtonProps, Spinner, Box, Flex } from '@chakra-ui/core'\n\ninterface RaisedButtonProps {\n  variantColor?: string\n}\n\nconst RaisedButton: React.FC<PseudoBoxProps & ButtonProps & RaisedButtonProps> = ({\n  children,\n  variantColor = 'purple.400',\n  isDisabled,\n  isLoading,\n  ...props\n}) => {\n  const splitColor = variantColor.split('.')\n  const colorGrade = parseInt(splitColor[1], 10)\n  const color = splitColor[0]\n  return (\n    <PseudoBox\n      as=\"button\"\n      d=\"flex\"\n      bg={variantColor}\n      py={2}\n      pb={1}\n      px={4}\n      alignItems=\"center\"\n      borderRadius={6}\n      borderBottomColor={`${color}.${Math.min(colorGrade + 100, 900)}`}\n      borderBottomWidth={4}\n      transition=\"all 0.2s ease\"\n      outline=\"none\"\n      pos=\"relative\"\n      aria-disabled={isDisabled}\n      _hover={{\n        backgroundColor: `${color}.${Math.min(colorGrade + 100, 900)}`,\n        borderBottomColor: `${color}.${Math.min(colorGrade + 200, 900)}`,\n      }}\n      _focus={{\n        boxShadow: 'outline',\n      }}\n      _active={{\n        borderBottomWidth: '2px',\n        mt: '2px',\n      }}\n      _disabled={{\n        opacity: 0.5,\n        cursor: 'not-allowed',\n      }}\n      {...props}\n    >\n      <Flex opacity={isLoading ? 0 : 1}>{children}</Flex>\n      <Spinner\n        opacity={isLoading ? 1 : 0}\n        pos=\"absolute\"\n        top=\"calc(50% - 12px)\"\n        left=\"calc(50% - 12px)\"\n        w=\"24px\"\n        h=\"24px\"\n      />\n    </PseudoBox>\n  )\n}\n\nexport default RaisedButton\n","import {\n  Box,\n  Flex,\n  List,\n  ListItem,\n  Popover,\n  PopoverArrow,\n  PopoverBody,\n  PopoverContent,\n  PopoverHeader,\n  PopoverTrigger,\n  Text,\n} from '@chakra-ui/core'\nimport React, { useContext, useEffect, useRef, useState } from 'react'\nimport UserContext from '../context/userContext'\nimport { firestore, functions } from '../firebaseApp'\nimport IconButton from './UI/IconButton'\nimport RaisedButton from './UI/RaisedButton'\n\nconst FriendRequests = () => {\n  const { user } = useContext(UserContext)\n  const friendsReqRef = useRef<any[]>([])\n  const [friendsReq, setFriendsReq] = useState<any[]>([])\n  const [requestsLoading, setRequestsLoading] = useState<string[]>([])\n\n  useEffect(() => {\n    if (!user) return\n\n    const unsubFriendsReq = firestore\n      .collection('users')\n      .doc(user?.uid)\n      .collection('friend-requests')\n      .onSnapshot((query) => {\n        query.docChanges().forEach((change) => {\n          const doc = change.doc\n          if (change.type === 'added') {\n            const data = { ...doc.data(), id: doc.id }\n            friendsReqRef.current = [...friendsReqRef.current, data]\n          }\n          if (change.type === 'modified') {\n            const id = doc.id\n            friendsReqRef.current = friendsReqRef.current.map((game) => {\n              if (game.id !== id) return game\n              return { ...doc.data(), id: doc.id }\n            })\n          }\n          if (change.type === 'removed') {\n            const id = doc.id\n            friendsReqRef.current = friendsReqRef.current.filter((game) => game.id !== id)\n          }\n        })\n        setFriendsReq(friendsReqRef.current)\n      })\n\n    return () => {\n      unsubFriendsReq()\n    }\n  }, [user])\n\n  const acceptFriendRequest = async (userId: string) => {\n    if (requestsLoading.includes(userId)) return\n    try {\n      setRequestsLoading((ids) => [...ids, userId])\n      const func = functions.httpsCallable('acceptFriendRequest')\n      await func({ userId })\n      setRequestsLoading((ids) => ids.filter((id) => id !== userId))\n    } catch (error) {\n      setRequestsLoading((ids) => ids.filter((id) => id !== userId))\n      console.error(error)\n    }\n  }\n\n  const declineFriendRequest = async (requestId: string) => {\n    if (requestsLoading.includes(requestId)) return\n    try {\n      setRequestsLoading((ids) => [...ids, requestId])\n      await firestore.collection('users').doc(user?.uid).collection('friend-requests').doc(requestId).delete()\n      setRequestsLoading((ids) => ids.filter((id) => id !== requestId))\n    } catch (error) {\n      setRequestsLoading((ids) => ids.filter((id) => id !== requestId))\n      console.error(error)\n    }\n  }\n\n  return (\n    <Popover>\n      <PopoverTrigger>\n        <Box as=\"button\" w=\"32px\" h=\"32px\" mr={4} pos=\"relative\">\n          <img src=\"/icons/users.svg\" alt=\"\" />\n          {friendsReq.length > 0 && (\n            <Box\n              pos=\"absolute\"\n              display=\"fled\"\n              justifyContent=\"center\"\n              alignItems=\"center\"\n              w={5}\n              h={5}\n              borderRadius=\"full\"\n              bg=\"red.500\"\n              color=\"white\"\n              fontSize=\"0.75rem\"\n              fontWeight=\"800\"\n              top=\"-0.5rem\"\n              right=\"-0.5rem\"\n            >\n              {friendsReq.length}\n            </Box>\n          )}\n        </Box>\n      </PopoverTrigger>\n      <PopoverContent zIndex={4} w=\"400px\" maxW=\"calc(100% - 32px)\" bg=\"purple.600\" borderColor=\"purple.700\">\n        <PopoverArrow />\n        <PopoverHeader borderColor=\"purple.700\">Friend requests</PopoverHeader>\n        <PopoverBody>\n          <List>\n            {friendsReq.map((friendReq) => {\n              return (\n                <ListItem\n                  d=\"flex\"\n                  p={2}\n                  alignItems=\"center\"\n                  justifyContent=\"space-between\"\n                  key={friendReq.id}\n                  borderBottom=\"1px solid\"\n                  borderColor=\"purple.700\"\n                >\n                  <Text whiteSpace=\"nowrap\" mr={4}>\n                    {friendReq.displayName}\n                  </Text>\n                  <Flex>\n                    <RaisedButton\n                      isLoading={requestsLoading.includes(friendReq.id)}\n                      isDisabled={requestsLoading.includes(friendReq.id)}\n                      mr={2}\n                      variantColor=\"green.400\"\n                      onClick={() => acceptFriendRequest(friendReq.id)}\n                    >\n                      <Box w=\"32px\" h=\"32px\" mr={2}>\n                        <img src=\"/icons/like.svg\" alt=\"\" />\n                      </Box>\n                      <Text fontSize=\"1.25rem\" fontWeight=\"700\" color=\"white\" textShadow=\"1px 1px 0px rgba(0,0,0,0.2)\">\n                        Accept\n                      </Text>\n                    </RaisedButton>\n                    <IconButton\n                      isLoading={requestsLoading.includes(friendReq.id)}\n                      isDisabled={requestsLoading.includes(friendReq.id)}\n                      variantColor=\"red.400\"\n                      onClick={() => declineFriendRequest(friendReq.id)}\n                    >\n                      <Box w=\"32px\" h=\"32px\">\n                        <img src=\"/icons/bad.svg\" alt=\"\" />\n                      </Box>\n                    </IconButton>\n                  </Flex>\n                </ListItem>\n              )\n            })}\n          </List>\n        </PopoverBody>\n      </PopoverContent>\n    </Popover>\n  )\n}\n\nexport default FriendRequests\n","import {\n  Box,\n  Flex,\n  List,\n  ListItem,\n  Popover,\n  PopoverArrow,\n  PopoverBody,\n  PopoverContent,\n  PopoverHeader,\n  PopoverTrigger,\n  Text,\n} from '@chakra-ui/core'\nimport React, { useContext, useEffect, useRef, useState } from 'react'\nimport UserContext from '../context/userContext'\nimport { firestore, functions } from '../firebaseApp'\nimport IconButton from './UI/IconButton'\nimport RaisedButton from './UI/RaisedButton'\nconst GameChallenges = () => {\n  const { user } = useContext(UserContext)\n  const challengesRef = useRef<any[]>([])\n  const [challenges, setChallenges] = useState<any[]>([])\n  const [requestsLoading, setRequestsLoading] = useState<string[]>([])\n\n  useEffect(() => {\n    if (!user) return\n\n    const unsubChallenges = firestore\n      .collection('users')\n      .doc(user?.uid)\n      .collection('challenges')\n      .onSnapshot((query) => {\n        query.docChanges().forEach((change) => {\n          const doc = change.doc\n          if (change.type === 'added') {\n            const data = { ...doc.data(), id: doc.id }\n            challengesRef.current = [...challengesRef.current, data]\n          }\n          if (change.type === 'modified') {\n            const id = doc.id\n            challengesRef.current = challengesRef.current.map((challenge) => {\n              if (challenge.id !== id) return challenge\n              return { ...doc.data(), id: doc.id }\n            })\n          }\n          if (change.type === 'removed') {\n            const id = doc.id\n            challengesRef.current = challengesRef.current.filter((challenge) => challenge.id !== id)\n          }\n        })\n        setChallenges(challengesRef.current)\n      })\n\n    return () => {\n      unsubChallenges()\n    }\n  }, [user])\n\n  const declineChallenge = async (challengeId: string) => {\n    if (requestsLoading.includes(challengeId)) return\n    try {\n      setRequestsLoading((ids) => [...ids, challengeId])\n      await firestore.collection('users').doc(user?.uid).collection('challenges').doc(challengeId).delete()\n      setRequestsLoading((ids) => ids.filter((id) => id !== challengeId))\n    } catch (error) {\n      setRequestsLoading((ids) => ids.filter((id) => id !== challengeId))\n      console.error(error)\n    }\n  }\n\n  const acceptChallenge = async (userId: string) => {\n    if (requestsLoading.includes(userId)) return\n    try {\n      setRequestsLoading((ids) => [...ids, userId])\n      const func = functions.httpsCallable('acceptChallenge')\n      await func({ userId })\n      setRequestsLoading((ids) => ids.filter((id) => id !== userId))\n    } catch (error) {\n      setRequestsLoading((ids) => ids.filter((id) => id !== userId))\n      console.error(error)\n    }\n  }\n\n  return (\n    <Popover>\n      <PopoverTrigger>\n        <Box as=\"button\" w=\"32px\" h=\"32px\" mr={4} pos=\"relative\">\n          <img src=\"/icons/bell.svg\" alt=\"\" />\n          {challenges.length > 0 && (\n            <Box\n              pos=\"absolute\"\n              display=\"fled\"\n              justifyContent=\"center\"\n              alignItems=\"center\"\n              w={5}\n              h={5}\n              borderRadius=\"full\"\n              bg=\"red.500\"\n              color=\"white\"\n              fontSize=\"0.75rem\"\n              fontWeight=\"800\"\n              top=\"-0.5rem\"\n              right=\"-0.5rem\"\n            >\n              {challenges.length}\n            </Box>\n          )}\n        </Box>\n      </PopoverTrigger>\n      <PopoverContent zIndex={4} w=\"400px\" maxW=\"calc(100% - 32px)\" bg=\"purple.600\" borderColor=\"purple.700\">\n        <PopoverArrow />\n        <PopoverHeader borderColor=\"purple.700\">Game challenges</PopoverHeader>\n        <PopoverBody>\n          <List>\n            {challenges.map((challenge) => {\n              return (\n                <ListItem\n                  d=\"flex\"\n                  p={2}\n                  alignItems=\"center\"\n                  justifyContent=\"space-between\"\n                  key={challenge.id}\n                  borderBottom=\"1px solid\"\n                  borderColor=\"purple.700\"\n                >\n                  <Text whiteSpace=\"nowrap\" mr={4}>\n                    {challenge.displayName}\n                  </Text>\n                  <Flex>\n                    <RaisedButton\n                      isLoading={requestsLoading.includes(challenge.id)}\n                      isDisabled={requestsLoading.includes(challenge.id)}\n                      mr={2}\n                      variantColor=\"green.400\"\n                      onClick={() => acceptChallenge(challenge.userId)}\n                    >\n                      <Box w=\"32px\" h=\"32px\" mr={2}>\n                        <img src=\"/icons/like.svg\" alt=\"\" />\n                      </Box>\n                      <Text fontSize=\"1.25rem\" fontWeight=\"700\" color=\"white\" textShadow=\"1px 1px 0px rgba(0,0,0,0.2)\">\n                        Accept\n                      </Text>\n                    </RaisedButton>\n                    <IconButton\n                      isLoading={requestsLoading.includes(challenge.id)}\n                      isDisabled={requestsLoading.includes(challenge.id)}\n                      variantColor=\"red.400\"\n                      onClick={() => declineChallenge(challenge.id)}\n                    >\n                      <Box w=\"32px\" h=\"32px\">\n                        <img src=\"/icons/bad.svg\" alt=\"\" />\n                      </Box>\n                    </IconButton>\n                  </Flex>\n                </ListItem>\n              )\n            })}\n          </List>\n        </PopoverBody>\n      </PopoverContent>\n    </Popover>\n  )\n}\n\nexport default GameChallenges\n","import React, { useEffect, useRef, useState, useContext } from 'react'\nimport { firestore } from '../firebaseApp'\nimport UserContext from '../context/userContext'\nimport firebase from 'firebase'\nimport { Heading, Button } from '@chakra-ui/core'\n\nconst Presence = () => {\n  const { user } = useContext(UserContext)\n  const presenceRef = useRef<any[]>([])\n  const [usersOnline, setUsersOnline] = useState<string[]>([])\n  useEffect(() => {\n    if (!user) return\n    const unsubPresence = firestore.collection('presence').onSnapshot((query) => {\n      query.docChanges().forEach((change) => {\n        const doc = change.doc\n        if (change.type === 'added') {\n          const data = { ...doc.data(), id: doc.id }\n          presenceRef.current = [...presenceRef.current, data]\n        }\n        if (change.type === 'modified') {\n          const id = doc.id\n          presenceRef.current = presenceRef.current.map((uid) => {\n            if (uid.id !== id) return uid\n            return { ...doc.data(), id: doc.id }\n          })\n        }\n        if (change.type === 'removed') {\n          const id = doc.id\n          presenceRef.current = presenceRef.current.filter((uid) => uid.id !== id)\n        }\n      })\n      setUsersOnline(presenceRef.current)\n    })\n\n    addPresence(user.uid)\n    setupBeforeUnloadListener()\n    return () => {\n      unsubPresence()\n      deletePresence(user.uid)\n    }\n  }, [user])\n\n  const addPresence = async (userId: string) => {\n    try {\n      await firestore\n        .collection('presence')\n        .doc(userId)\n        .set({ lastOnline: firebase.firestore.FieldValue.serverTimestamp() })\n    } catch (error) {\n      console.log(userId)\n      console.log('Cant add presence')\n    }\n  }\n\n  const deletePresence = async (userId: string) => {\n    try {\n      await firestore.collection('presence').doc(userId).delete()\n    } catch (error) {\n      console.log(userId)\n      console.log('Cant delete presence')\n      console.log(error)\n    }\n  }\n\n  const setupBeforeUnloadListener = () => {\n    if (!user) return\n    window.addEventListener('beforeunload', (ev) => {\n      ev.preventDefault()\n      return deletePresence(user.uid)\n    })\n  }\n\n  return <Heading>Users online: {usersOnline.length}</Heading>\n}\n\nexport default Presence\n","import { Avatar, Flex, Menu, MenuButton, MenuItem, MenuList } from '@chakra-ui/core'\nimport React, { FC, useContext } from 'react'\nimport { Link } from 'react-router-dom'\nimport UserContext from '../context/userContext'\nimport { auth } from '../firebaseApp'\nimport FriendRequests from './FriendRequests'\nimport GameChallenges from './GameChallenges'\nimport Presence from './Presence'\n\nconst Header: FC = () => {\n  const { user } = useContext(UserContext)\n\n  const signOut = () => {\n    auth.signOut()\n  }\n\n  return (\n    <Flex\n      px={4}\n      align=\"center\"\n      justify=\"space-between\"\n      bg=\"purple.800\"\n      borderBottomWidth=\"2px\"\n      borderBottomColor=\"purple.900\"\n      w=\"100%\"\n      h=\"5rem\"\n    >\n      <Link to=\"/\">FireShips</Link>\n      <Presence />\n      <Flex>\n        <FriendRequests />\n        <GameChallenges />\n        <Menu>\n          <MenuButton>\n            <Avatar size=\"sm\" name={user?.displayName ?? undefined} />\n          </MenuButton>\n          <MenuList border=\"none\" boxShadow=\"md\" bg=\"purple.500\">\n            <MenuItem\n              _hover={{ backgroundColor: 'purple.600' }}\n              _focus={{ backgroundColor: 'purple.600' }}\n              onClick={signOut}\n            >\n              Sign out\n            </MenuItem>\n          </MenuList>\n        </Menu>\n      </Flex>\n    </Flex>\n  )\n}\n\nexport default Header\n","import firebase from 'firebase'\nimport { firestore } from './firebaseApp'\n\nclass FirebaseMatchmakingManager {\n  matchmakingListener: (() => void) | null = null\n\n  joinQueue = (uid: string): Promise<void> => {\n    return firestore\n      .collection('matchmaking')\n      .doc(uid)\n      .set({ created: firebase.firestore.FieldValue.serverTimestamp() })\n  }\n\n  exitQueue = (uid: string): Promise<void> => {\n    return firestore.collection('matchmaking').doc(uid).delete()\n  }\n\n  subMatchmaking = (\n    uid: string,\n    success: (snapshot: firebase.firestore.DocumentSnapshot<firebase.firestore.DocumentData>) => void,\n    error: (error: Error) => void\n  ) => {\n    this.matchmakingListener = firestore\n      .collection('matchmaking')\n      .doc(uid)\n      .onSnapshot({ includeMetadataChanges: false }, success, error)\n  }\n\n  unsubMatchmaking = () => {\n    this.matchmakingListener && this.matchmakingListener()\n  }\n}\n\nexport default FirebaseMatchmakingManager\n","import React, { useState, useRef, useEffect, FC } from 'react'\nimport { Box, Grid, Button, Flex } from '@chakra-ui/core'\nimport { useDrag, useGesture } from 'react-use-gesture'\n\nconst xy = Array.from(Array(10)).map(() => Array.from(Array(10)).map(() => false))\n\nconst defaultShipPosition: { [key: string]: { x: number; y: number; rotated: boolean } } = {\n  carrier: { x: 0, y: 0, rotated: false },\n  battleship: { x: 0, y: 1, rotated: false },\n  destroyer: { x: 0, y: 2, rotated: false },\n  submarine: { x: 0, y: 3, rotated: false },\n  patrol: { x: 0, y: 4, rotated: false },\n}\n\nconst shipLength: { [key: string]: number } = {\n  carrier: 5,\n  battleship: 4,\n  destroyer: 3,\n  submarine: 3,\n  patrol: 2,\n}\n\nconst GamePlacementGrid: FC<{\n  onShipsPlaced: (positions: { [key: string]: [string] }, isOverlapping: boolean) => void\n}> = ({ onShipsPlaced }) => {\n  const gridRef = useRef()\n  const lastShipDragged = useRef<string>('')\n  const [shipPlacement, setShipPlacement] = useState<any>(defaultShipPosition)\n  const [shipDragPosition, setShipDragPosition] = useState<any | undefined>()\n  const [gridWidth, setGridWidth] = useState<number>(0)\n  const [isOverlapping, setIsOverlapping] = useState<boolean>(false)\n\n  const bind = useGesture({\n    onDrag: ({ movement: [mx, my] }) => {\n      handleDrag(mx, my)\n    },\n    onDragStart: ({ event }) => {\n      handleDragStart(event!.target)\n    },\n    onDragEnd: ({ movement: [mx, my] }) => {\n      handleDragEnd(mx, my)\n    },\n  })\n\n  const handleDrag = (x: number, y: number) => {\n    const currentShipPlacement = shipPlacement[lastShipDragged.current]\n    const newX = Math.min(\n      10 - (!currentShipPlacement.rotated ? shipLength[lastShipDragged.current] : 1),\n      Math.max(0, currentShipPlacement.x + Math.floor(x / gridWidth))\n    )\n    const newY = Math.min(\n      10 - (currentShipPlacement.rotated ? shipLength[lastShipDragged.current] : 1),\n      Math.max(0, currentShipPlacement.y + Math.floor(y / gridWidth))\n    )\n    const newPosition = { ...currentShipPlacement, x: newX, y: newY }\n    setShipDragPosition({ ...shipPlacement, [lastShipDragged.current]: newPosition })\n  }\n\n  const handleDragStart = (target: EventTarget) => {\n    const domElement = target as HTMLElement\n    lastShipDragged.current = domElement.dataset.ship || lastShipDragged.current\n  }\n\n  const handleDragEnd = (x: number, y: number) => {\n    const currentShipPlacement = shipPlacement[lastShipDragged.current]\n    const newX = Math.min(\n      10 - (!currentShipPlacement.rotated ? shipLength[lastShipDragged.current] : 1),\n      Math.max(0, currentShipPlacement.x + Math.floor(x / gridWidth))\n    )\n    const newY = Math.min(\n      10 - (currentShipPlacement.rotated ? shipLength[lastShipDragged.current] : 1),\n      Math.max(0, currentShipPlacement.y + Math.floor(y / gridWidth))\n    )\n    const newPosition = { ...currentShipPlacement, x: newX, y: newY }\n    const newPlacement = { ...shipPlacement, [lastShipDragged.current]: newPosition }\n    setShipPlacement(newPlacement)\n    setShipDragPosition(undefined)\n\n    const placementObject = Object.entries<{ x: number; y: number; rotated: boolean }>(newPlacement).reduce(\n      (acc, [key, value]) => {\n        return {\n          ...acc,\n          [key]: {\n            positions: [...Array(shipLength[key])].map((_, index) =>\n              value.rotated ? `x${value.x}y${value.y + index}` : `x${value.x + index}y${value.y}`\n            ),\n          },\n        }\n      },\n      {}\n    )\n\n    const flatArray = Object.values<{ positions: [string] }>(placementObject)\n      .map((p) => p.positions)\n      .flat()\n    const isOverlapping = new Set(flatArray).size !== flatArray.length\n    onShipsPlaced(placementObject, isOverlapping)\n  }\n\n  useEffect(() => {\n    const positions = Object.entries<{ x: number; y: number; rotated: boolean }>(shipPlacement).map(([key, value]) => {\n      return [...Array(shipLength[key])].map((_, index) =>\n        value.rotated ? `x${value.x}y${value.y + index}` : `x${value.x + index}y${value.y}`\n      )\n    })\n    const placementObject = Object.entries<{ x: number; y: number; rotated: boolean }>(shipPlacement).reduce(\n      (acc, [key, value]) => {\n        return {\n          ...acc,\n          [key]: {\n            positions: [...Array(shipLength[key])].map((_, index) =>\n              value.rotated ? `x${value.x}y${value.y + index}` : `x${value.x + index}y${value.y}`\n            ),\n          },\n        }\n      },\n      {}\n    )\n    const flatArray = positions.flat()\n    const isOverlapping = new Set(flatArray).size !== flatArray.length\n    setIsOverlapping(isOverlapping)\n    onShipsPlaced(placementObject, isOverlapping)\n  }, [shipPlacement])\n\n  useEffect(() => {\n    const grid: HTMLElement = gridRef.current!\n    const rect = grid.getBoundingClientRect()\n    const width = (rect.width - 4) / 10\n    setGridWidth(width)\n  }, [])\n\n  const calculateYPosition = (ship: string) => {\n    if (shipDragPosition) {\n      return `${shipDragPosition[ship].y * gridWidth}px`\n    }\n    return `${shipPlacement[ship].y * gridWidth}px`\n  }\n\n  const calculateXPosition = (ship: string) => {\n    if (shipDragPosition) {\n      return `${shipDragPosition[ship].x * gridWidth}px`\n    }\n    return `${shipPlacement[ship].x * gridWidth}px`\n  }\n\n  const rotateShip = (ship: string) => {\n    const currentShip = shipPlacement[ship]\n    const isRotated = currentShip.rotated\n\n    if (isRotated) {\n      const newX = Math.min(10 - shipLength[ship], currentShip.x)\n      setShipPlacement({ ...shipPlacement, [ship]: { ...currentShip, x: newX, rotated: !isRotated } })\n    } else {\n      const newY = Math.min(10 - shipLength[ship], currentShip.y)\n      setShipPlacement({ ...shipPlacement, [ship]: { ...currentShip, y: newY, rotated: !isRotated } })\n    }\n  }\n\n  const widthForShip = (ship: string) => {\n    if (shipPlacement[ship].rotated) {\n      return `${gridWidth - 16}px`\n    }\n    return `${shipLength[ship] * gridWidth - 16}px`\n  }\n\n  const heightForShip = (ship: string) => {\n    if (shipPlacement[ship].rotated) {\n      return `${shipLength[ship] * gridWidth - 16}px`\n    }\n    return `${gridWidth - 16}px`\n  }\n\n  return (\n    <>\n      <Grid\n        gridTemplateColumns=\"repeat(10, 1fr)\"\n        w=\"100%\"\n        maxW=\"550px\"\n        margin=\"0 auto\"\n        border=\"2px solid\"\n        borderColor=\"blue.500\"\n        pos=\"relative\"\n        ref={gridRef}\n      >\n        {xy.map((yArray, xIndex) => {\n          return yArray.map((checked, yIndex) => (\n            <Box\n              key={`${xIndex}-${yIndex}`}\n              outline=\"none\"\n              border=\"2px solid\"\n              borderColor=\"blue.500\"\n              w=\"100%\"\n              paddingTop=\"calc(100% - 4px)\"\n              bg=\"blue.700\"\n            ></Box>\n          ))\n        })}\n        {Object.keys(shipPlacement).map((ship) => {\n          return (\n            <Box\n              key={ship}\n              style={{\n                width: widthForShip(ship),\n                height: heightForShip(ship),\n                top: calculateYPosition(ship),\n                left: calculateXPosition(ship),\n              }}\n              borderRadius=\"full\"\n              transform=\"translate3d(8px, 8px, 0px)\"\n              bg=\"gray.400\"\n              border=\"4px solid\"\n              borderColor={lastShipDragged.current === ship ? 'gray.300' : 'transparent'}\n              boxShadow={lastShipDragged.current === ship ? 'lg' : 'none'}\n              zIndex={lastShipDragged.current === ship ? 2 : 1}\n              opacity={0.95}\n              pos=\"absolute\"\n              data-ship={ship}\n              {...bind()}\n            ></Box>\n          )\n        })}\n      </Grid>\n      <Flex pt={4} w=\"200px\" margin=\"0 auto\" flexDir=\"column\">\n        <Button\n          variantColor=\"blue\"\n          isDisabled={!lastShipDragged.current}\n          onClick={() => rotateShip(lastShipDragged.current)}\n        >\n          Rotate selected ship\n        </Button>\n        {isOverlapping ? 'Ships are overlapping' : 'Ships are well placed'}\n      </Flex>\n    </>\n  )\n}\n\nexport default GamePlacementGrid\n","import React, { FC } from 'react'\nimport { Box } from '@chakra-ui/core'\n\ninterface ScoreProps {\n  isOpponent: boolean\n  hits: any[]\n}\n\nconst Score: FC<ScoreProps> = ({ isOpponent, hits }) => {\n  const skewDeg = isOpponent ? -12 : 12\n  const hitColor = isOpponent ? 'red.400' : 'green.400'\n  return (\n    <Box\n      d=\"flex\"\n      w=\"212px\"\n      h=\"32px\"\n      borderRadius=\"md\"\n      bg=\"purple.500\"\n      justifyContent=\"space-around\"\n      p={1}\n      mb={2}\n      transform={`skewX(${skewDeg}deg)`}\n    >\n      {hits.map(() => (\n        <Box borderRadius=\"sm\" w=\"8px\" bg={hitColor}></Box>\n      ))}\n      {[...Array.from(Array(17 - hits.length))].map(() => (\n        <Box borderRadius=\"sm\" w=\"8px\" bg=\"purple.400\"></Box>\n      ))}\n    </Box>\n  )\n}\n\nexport default Score\n","import React, { FC, useContext } from 'react'\nimport { PseudoBox } from '@chakra-ui/core'\nimport UserContext from '../context/userContext'\n\ninterface GameBoardSquareProps {\n  xIndex: number\n  yIndex: number\n  game: Game\n  trySquare: (square: string) => void\n  isPersonalBoard: boolean\n}\n\nconst GameBoardSquare: FC<GameBoardSquareProps> = ({ xIndex, yIndex, game, trySquare, isPersonalBoard }) => {\n  const { user } = useContext(UserContext)\n  const opponent = game?.players.find((player: string) => player !== user!.uid)!\n  const square = `x${xIndex}y${yIndex}`\n  const hits: { square: string; sunk: boolean }[] = game.hits[\n    !isPersonalBoard ? user!.uid : opponent\n  ].flatMap((ship: HitShip) => ship.hits.map((hit) => ({ square: hit, sunk: ship.sunk })))\n  const hit: { square: string; sunk: boolean } | undefined = hits.find((h) => h.square === square)\n  const tried = game.tries[!isPersonalBoard ? user!.uid : opponent].includes(square)\n  return (\n    <PseudoBox\n      as={tried || isPersonalBoard ? 'div' : 'button'}\n      onClick={() => trySquare(square)}\n      key={`${xIndex}-${yIndex}`}\n      aria-disabled={tried}\n      border=\"2px solid\"\n      borderColor={hit && hit.sunk ? 'red.800' : 'blue.500'}\n      borderRadius=\"none\"\n      w=\"100%\"\n      p={0}\n      paddingTop=\"calc(100% - 4px)\"\n      minW=\"auto\"\n      h=\"auto\"\n      _hover={{\n        boxShadow: tried || isPersonalBoard ? 'none' : 'inset 0px 0px 0px 2px red',\n      }}\n      _disabled={{\n        boxShadow: 'none',\n        cursor: 'default',\n      }}\n      _active={{}}\n      opacity={hit && hit.sunk ? 0.8 : 1}\n      transition=\"none\"\n      backgroundRepeat=\"no-repeat\"\n      backgroundPosition=\"center center\"\n      backgroundSize=\"80%\"\n      backgroundColor={hit ? (hit.sunk ? 'red.800' : 'blue.800') : tried ? 'blue.800' : 'blue.700'}\n      backgroundImage={hit ? 'url(/icons/explosion.svg)' : tried ? 'url(/icons/miss.svg)' : 'none'}\n    />\n  )\n}\n\nexport default GameBoardSquare\n","import React, { useContext, useEffect, useState, useRef } from 'react'\nimport { firestore, functions } from '../firebaseApp'\nimport UserContext from '../context/userContext'\nimport { useParams } from 'react-router'\nimport { Button, Grid, Box, Flex, Heading, Text, useToast, PseudoBox } from '@chakra-ui/core'\nimport RaisedButton from '../components/UI/RaisedButton'\nimport GamePlacementGrid from '../components/GamePlacementGrid'\nimport Score from '../components/Score'\nimport GameBoardSquare from '../components/GameBoardSquare'\n\nconst xy = Array.from(Array(10)).map(() => Array.from(Array(10)).map(() => false))\n\nconst shipLength = [5, 4, 3, 3, 2]\n\nconst Game = () => {\n  const { user, displayName } = useContext(UserContext)\n  const gridRef = useRef()\n  const toast = useToast()\n  const { gameId } = useParams()\n  const [game, setGame] = useState<Game>()\n  const [placement, setPlacement] = useState<{ [key: string]: [string] }>({})\n  const [canSendPlacement, setCanSendPlacement] = useState<boolean>(false)\n  const [isTrying, setIsTrying] = useState<boolean>(false)\n  const [showOwnBoard, setShowOwnBoard] = useState<boolean>(false)\n  const [personalPlacmenet, setPersonalPlacement] = useState<{ positions: string[] }[]>([])\n  const [gridWidth, setGridWidth] = useState<number>(0)\n\n  useEffect(() => {\n    if (!user) return\n\n    const unsubGames = firestore\n      .collection('games')\n      .doc(gameId)\n      .onSnapshot((snapshot) => {\n        const game: Game = { id: snapshot.id, ...snapshot.data()! } as Game\n        setGame(game)\n      })\n\n    firestore\n      .collection('users')\n      .doc(user.uid)\n      .collection('games')\n      .doc(gameId)\n      .get()\n      .then((snapshot) => {\n        setPersonalPlacement(snapshot.data()!.placement)\n      })\n      .catch((err) => {\n        console.log(err)\n      })\n\n    return () => {\n      unsubGames()\n    }\n  }, [user, gameId])\n\n  useEffect(() => {\n    if (!gridRef.current) {\n      return\n    }\n    const grid: HTMLElement = gridRef.current!\n    const rect = grid.getBoundingClientRect()\n    const width = (rect.width - 4) / 10\n    setGridWidth(width)\n  }, [showOwnBoard])\n\n  const widthForShip = (ship: { positions: string[] }, index: number) => {\n    const rotated = parseInt(ship.positions[0][1], 10) === parseInt(ship.positions[1][1], 10)\n    if (rotated) {\n      return `${gridWidth - 16}px`\n    }\n    return `${shipLength[index] * gridWidth - 16}px`\n  }\n\n  const heightForShip = (ship: { positions: string[] }, index: number) => {\n    const rotated = parseInt(ship.positions[0][1], 10) === parseInt(ship.positions[1][1], 10)\n    if (rotated) {\n      return `${shipLength[index] * gridWidth - 16}px`\n    }\n    return `${gridWidth - 16}px`\n  }\n\n  const calculateYPosition = (ship: { positions: string[] }) => {\n    const y = parseInt(ship.positions[0][3], 10)\n    return `${y * gridWidth}px`\n  }\n\n  const calculateXPosition = (ship: { positions: string[] }) => {\n    const x = parseInt(ship.positions[0][1], 10)\n    return `${x * gridWidth}px`\n  }\n\n  const trySquare = async (square: string) => {\n    //functions.useFunctionsEmulator('http://localhost:5001')\n    if (game?.currentPlayer !== user?.uid || isTrying) {\n      toast({\n        title: 'Not your turn.',\n        description: \"Couldn't fire rocket, its not your turn.\",\n        status: 'error',\n        duration: 3000,\n        isClosable: true,\n      })\n    } else {\n      const trySquareFunc = functions.httpsCallable('trySquare')\n      try {\n        setIsTrying(true)\n        const response = await trySquareFunc({ square, gameId })\n        const { isHit, gameIsWon } = response.data\n        if (isHit) {\n          toast({\n            title: 'You hit one of the ships',\n            status: 'info',\n            duration: 3000,\n            isClosable: true,\n          })\n        }\n        if (gameIsWon) {\n          toast({\n            title: 'You one the game!!',\n            description: 'Congrats',\n            status: 'success',\n            duration: 3000,\n            isClosable: true,\n          })\n        }\n\n        setIsTrying(false)\n      } catch (error) {\n        console.error(error)\n        setIsTrying(false)\n      }\n    }\n  }\n\n  const confirmPlacement = async () => {\n    if (Object.keys(placement).length !== 5) return\n    try {\n      await firestore\n        .collection('placements')\n        .doc(gameId)\n        .update({\n          [user!.uid]: Object.values(placement),\n        })\n      const hasPlaced = [...(game?.hasPlaced || []), user?.uid]\n      firestore.collection('games').doc(gameId).update({\n        hasPlaced,\n      })\n    } catch (error) {\n      console.error(error)\n    }\n  }\n\n  if (!game?.players) return <Text>Loading</Text>\n\n  const opponent = game?.players.find((player: string) => player !== user!.uid)!\n\n  const handleShipsPlaced = (positions: { [key: string]: [string] }, isOverlapping: boolean) => {\n    setPlacement(positions)\n    setCanSendPlacement(!isOverlapping)\n  }\n\n  return (\n    <Flex direction=\"column\" justify=\"space-between\">\n      <Flex direction=\"column\" p={2}>\n        {game.winner && <Heading>Winner {game.winner === user?.uid ? 'You won' : 'Your opponent won'}</Heading>}\n        {game.state === 'PLAYING' ? (\n          <>\n            <Heading textAlign=\"center\">{game.currentPlayer === user?.uid ? 'Your' : 'Opponents'} turn</Heading>\n            <Flex flexWrap=\"wrap\" justifyContent=\"space-between\" w=\"100%\" maxW=\"550px\" margin=\"0 auto\" mb={2}>\n              <Box>\n                <Text fontSize=\"0.75rem\">{displayName}</Text>\n                {game.hits && (\n                  <Score\n                    isOpponent={false}\n                    hits={game.hits[user!.uid].flatMap((ship: { hits: string[]; sunk: boolean }) => ship.hits)}\n                  />\n                )}\n              </Box>\n              <Box ml=\"auto\" textAlign=\"right\">\n                <Text fontSize=\"0.75rem\">{opponent || 'Opponent'}</Text>\n                {game.hits && (\n                  <Score\n                    isOpponent\n                    hits={game.hits[opponent].flatMap((ship: { hits: string[]; sunk: boolean }) => ship.hits)}\n                  />\n                )}\n              </Box>\n            </Flex>\n            {!showOwnBoard ? (\n              <Grid\n                gridTemplateColumns=\"repeat(10, 1fr)\"\n                w=\"100%\"\n                maxW=\"550px\"\n                margin=\"0 auto\"\n                border=\"2px solid\"\n                borderColor=\"blue.500\"\n                boxShadow={game.currentPlayer === user?.uid ? '0px 0px 48px #FFEB3B' : 'none'}\n              >\n                {xy.map((yArray, yIndex) => {\n                  return yArray.map((checked, xIndex) => (\n                    <GameBoardSquare\n                      xIndex={xIndex}\n                      yIndex={yIndex}\n                      game={game}\n                      trySquare={trySquare}\n                      isPersonalBoard={false}\n                    />\n                  ))\n                })}\n              </Grid>\n            ) : (\n              <Grid\n                gridTemplateColumns=\"repeat(10, 1fr)\"\n                w=\"100%\"\n                maxW=\"550px\"\n                margin=\"0 auto\"\n                border=\"2px solid\"\n                borderColor=\"blue.500\"\n                position=\"relative\"\n                ref={gridRef}\n              >\n                {xy.map((yArray, yIndex) => {\n                  return yArray.map((checked, xIndex) => (\n                    <GameBoardSquare\n                      xIndex={xIndex}\n                      yIndex={yIndex}\n                      game={game}\n                      trySquare={trySquare}\n                      isPersonalBoard\n                    />\n                  ))\n                })}\n                {personalPlacmenet.map((ship, index) => {\n                  return (\n                    <Box\n                      style={{\n                        width: widthForShip(ship, index),\n                        height: heightForShip(ship, index),\n                        top: calculateYPosition(ship),\n                        left: calculateXPosition(ship),\n                      }}\n                      borderRadius=\"full\"\n                      transform=\"translate3d(8px, 8px, 0px)\"\n                      bg=\"gray.400\"\n                      border=\"4px solid\"\n                      opacity={0.35}\n                      pos=\"absolute\"\n                    ></Box>\n                  )\n                })}\n              </Grid>\n            )}\n            <Flex margin=\"0 auto\" p={8}>\n              <Button mr={2} variantColor=\"teal\" isDisabled={!showOwnBoard} onClick={() => setShowOwnBoard(false)}>\n                Playing board\n              </Button>\n              <Button variantColor=\"teal\" isDisabled={showOwnBoard} onClick={() => setShowOwnBoard(true)}>\n                My board\n              </Button>\n            </Flex>\n          </>\n        ) : game.hasPlaced && game.hasPlaced.includes(user!.uid) ? (\n          <Heading p={4} textAlign=\"center\">\n            Waiting for opponent to place their ships\n          </Heading>\n        ) : (\n          <>\n            <Heading p={4} textAlign=\"center\">\n              Drag your ship placements\n            </Heading>\n            <GamePlacementGrid onShipsPlaced={handleShipsPlaced} />\n            <Box p={8}>\n              <RaisedButton\n                w=\"100%\"\n                justifyContent=\"center\"\n                isDisabled={!canSendPlacement}\n                onClick={() => confirmPlacement()}\n              >\n                <Text fontSize=\"1.25rem\" fontWeight=\"700\" color=\"white\" textShadow=\"1px 1px 0px rgba(0,0,0,0.2)\">\n                  {!canSendPlacement ? `Position ships so they are not overlapping` : 'Submit placement'}\n                </Text>\n              </RaisedButton>\n            </Box>\n          </>\n        )}\n      </Flex>\n    </Flex>\n  )\n}\n\nexport default Game\n","import React, { useState, useEffect } from 'react'\nimport { Input, Text, Box, Button } from '@chakra-ui/core'\nimport { firestore, functions } from '../firebaseApp'\nimport {\n  Modal,\n  ModalOverlay,\n  ModalContent,\n  ModalHeader,\n  ModalFooter,\n  ModalBody,\n  ModalCloseButton,\n} from '@chakra-ui/core'\nimport RaisedButton from './UI/RaisedButton'\n\ninterface PublicUser {\n  displayName: string\n  userId: string\n}\n\nconst AddFriends = () => {\n  const [searchQuery, setSearchQuery] = useState<string>('')\n  const [foundUser, setFoundUser] = useState<PublicUser | undefined>()\n  const [loading, setLoading] = useState<boolean>(false)\n\n  useEffect(() => {\n    if (searchQuery.length < 3) return\n\n    searchForUsers(searchQuery)\n  }, [searchQuery])\n\n  const sendFriendRequest = async (userId: string) => {\n    try {\n      const func = functions.httpsCallable('sendFriendRequest')\n      await func({ userId })\n    } catch (error) {\n      console.error(error)\n    }\n  }\n\n  const searchForUsers = async (query: string) => {\n    try {\n      const publicUserSnapshot = await firestore.collection('public-users').doc(query).get()\n      if (!publicUserSnapshot.exists) {\n        setFoundUser(undefined)\n        console.log('No user found')\n        return\n      }\n      const publicUser: PublicUser = publicUserSnapshot.data() as PublicUser\n      console.log(publicUser)\n      setFoundUser(publicUser)\n    } catch (error) {\n      console.log('Error, No user found')\n      setFoundUser(undefined)\n    }\n  }\n\n  const onClose = () => {\n    setFoundUser(undefined)\n    setSearchQuery('')\n  }\n\n  const handleAdd = async (userId: string) => {\n    try {\n      setLoading(true)\n      await sendFriendRequest(userId)\n      setLoading(false)\n      onClose()\n    } catch (error) {\n      setLoading(false)\n      onClose()\n      console.log(error)\n    }\n  }\n\n  return (\n    <>\n      <Input\n        bg=\"purple.400\"\n        color=\"purple.900\"\n        h=\"52px\"\n        border=\"none\"\n        placeholder=\"Friend Code\"\n        _placeholder={{\n          color: 'purple.700',\n        }}\n        value={searchQuery}\n        onChange={(event: React.ChangeEvent<HTMLInputElement>) => setSearchQuery(event.target.value)}\n      />\n      <Modal isOpen={!!foundUser} onClose={onClose}>\n        <ModalOverlay />\n        {foundUser && (\n          <ModalContent borderRadius=\"lg\" bg=\"purple.200\">\n            <ModalHeader>{foundUser.displayName}</ModalHeader>\n            <ModalCloseButton />\n            <ModalBody></ModalBody>\n\n            <ModalFooter>\n              <RaisedButton isDisabled={loading} variantColor=\"gray.400\" mr={3} onClick={onClose}>\n                <Text whiteSpace=\"nowrap\" fontSize=\"1.25rem\" fontWeight=\"700\" color=\"black\">\n                  Close\n                </Text>\n              </RaisedButton>\n              <RaisedButton\n                isLoading={loading}\n                isDisabled={loading}\n                variantColor=\"green.400\"\n                onClick={() => handleAdd(foundUser.userId)}\n              >\n                <Text\n                  whiteSpace=\"nowrap\"\n                  fontSize=\"1.25rem\"\n                  fontWeight=\"700\"\n                  color=\"white\"\n                  textShadow=\"1px 1px 0px rgba(0,0,0,0.2)\"\n                >\n                  Add friend\n                </Text>\n              </RaisedButton>\n            </ModalFooter>\n          </ModalContent>\n        )}\n      </Modal>\n    </>\n  )\n}\n\nexport default AddFriends\n","import React, { useRef, useState, useContext, useEffect } from 'react'\nimport UserContext from '../context/userContext'\nimport { firestore, functions } from '../firebaseApp'\nimport { List, ListItem, Text, Button, Image, Box, PseudoBox } from '@chakra-ui/core'\nimport RaisedButton from './UI/RaisedButton'\n\nconst FriendList = () => {\n  const { user } = useContext(UserContext)\n  const friendsRef = useRef<any[]>([])\n  const [friends, setFriends] = useState<any[]>([])\n  const [challengesLoading, setChallengesLoading] = useState<string[]>([])\n\n  useEffect(() => {\n    if (!user) return\n\n    const unsubFriends = firestore\n      .collection('users')\n      .doc(user?.uid)\n      .collection('friends')\n      .onSnapshot((query) => {\n        query.docChanges().forEach((change) => {\n          const doc = change.doc\n          if (change.type === 'added') {\n            const data = { ...doc.data(), id: doc.id }\n            friendsRef.current = [...friendsRef.current, data]\n          }\n          if (change.type === 'modified') {\n            const id = doc.id\n            friendsRef.current = friendsRef.current.map((game) => {\n              if (game.id !== id) return game\n              return { ...doc.data(), id: doc.id }\n            })\n          }\n          if (change.type === 'removed') {\n            const id = doc.id\n            friendsRef.current = friendsRef.current.filter((game) => game.id !== id)\n          }\n        })\n        setFriends(friendsRef.current)\n      })\n\n    return () => {\n      unsubFriends()\n    }\n  }, [user])\n\n  const sendChallenge = async (userId: string) => {\n    if (challengesLoading.includes(userId)) return\n    try {\n      setChallengesLoading((ids) => [...ids, userId])\n      const func = functions.httpsCallable('sendChallenge')\n      await func({ userId })\n      setChallengesLoading((ids) => ids.filter((id) => id !== userId))\n    } catch (error) {\n      setChallengesLoading((ids) => ids.filter((id) => id !== userId))\n      console.error(error)\n    }\n  }\n\n  return (\n    <List>\n      {friends.map((friend) => {\n        return (\n          <ListItem\n            d=\"flex\"\n            py={4}\n            alignItems=\"center\"\n            justifyContent=\"space-between\"\n            key={friend.id}\n            borderBottom=\"2px solid\"\n            borderColor=\"purple.700\"\n          >\n            <Text fontSize=\"1.25rem\">{friend.displayName}</Text>\n            <RaisedButton\n              isLoading={challengesLoading.includes(friend.userId)}\n              isDisabled={challengesLoading.includes(friend.userId)}\n              variantColor=\"orange.300\"\n              onClick={() => sendChallenge(friend.userId)}\n            >\n              <Box w=\"32px\" h=\"32px\" mr={2}>\n                <img src=\"/icons/swords.svg\" alt=\"\" />\n              </Box>\n              <Text fontSize=\"1.25rem\" fontWeight=\"700\" color=\"white\" textShadow=\"1px 1px 0px rgba(0,0,0,0.2)\">\n                Challenge\n              </Text>\n            </RaisedButton>\n          </ListItem>\n        )\n      })}\n    </List>\n  )\n}\n\nexport default FriendList\n","import React, { FC, useContext } from 'react'\nimport { ListItem, Flex, Box, Text } from '@chakra-ui/core'\nimport Score from './Score'\nimport { Link } from 'react-router-dom'\nimport RaisedButton from './UI/RaisedButton'\nimport UserContext from '../context/userContext'\n\ninterface GameItemProps {\n  game: UserGame\n}\n\nconst GameItem: FC<GameItemProps> = ({ game }) => {\n  const { user, displayName } = useContext(UserContext)\n  return (\n    <ListItem key={game.id} mb={4} p={4} borderRadius=\"lg\" bg=\"purple.700\">\n      <Flex flexWrap=\"wrap\" justifyContent=\"space-between\">\n        <Box>\n          <Text fontSize=\"0.75rem\">{displayName}</Text>\n          {game.hits && <Score isOpponent={false} hits={game.hits[user!.uid].flatMap((ship) => ship.hits)} />}\n        </Box>\n        <Box ml=\"auto\" textAlign=\"right\">\n          <Text fontSize=\"0.75rem\">{game.opponentName || game.opponent}</Text>\n          {game.hits && <Score isOpponent hits={game.hits[game.opponent].flatMap((ship) => ship.hits)} />}\n        </Box>\n      </Flex>\n      <Link to={`/game/${game.id}`}>\n        <RaisedButton\n          mt={4}\n          w=\"100%\"\n          justifyContent=\"center\"\n          variantColor={game.currentPlayer === user?.uid ? 'teal.400' : 'purple.400'}\n        >\n          <Text\n            whiteSpace=\"nowrap\"\n            fontSize=\"1.25rem\"\n            fontWeight=\"700\"\n            color=\"white\"\n            textShadow=\"1px 1px 0px rgba(0,0,0,0.2)\"\n          >\n            {game.currentPlayer === user?.uid ? 'Your turn' : game.state === 'PLAYING' ? 'View game' : 'Place ships'}\n          </Text>\n        </RaisedButton>\n      </Link>\n    </ListItem>\n  )\n}\n\nexport default GameItem\n","import { List, Heading } from '@chakra-ui/core'\nimport React, { useContext, useEffect, useRef, useState } from 'react'\nimport UserContext from '../context/userContext'\nimport { firestore } from '../firebaseApp'\nimport GameItem from './GameItem'\n\nconst GameList = () => {\n  const { user } = useContext(UserContext)\n  const gamesRef = useRef<any[]>([])\n  const [games, setGames] = useState<UserGame[]>([])\n\n  useEffect(() => {\n    if (!user) return\n\n    const unsubGames = firestore\n      .collection('users')\n      .doc(user?.uid)\n      .collection('games')\n      .onSnapshot((query) => {\n        query.docChanges().forEach((change) => {\n          const doc = change.doc\n          if (change.type === 'added') {\n            const data = { ...doc.data(), id: doc.id }\n            gamesRef.current = [...gamesRef.current, data]\n          }\n          if (change.type === 'modified') {\n            const id = doc.id\n            gamesRef.current = gamesRef.current.map((game) => {\n              if (game.id !== id) return game\n              return { ...doc.data(), id: doc.id }\n            })\n          }\n          if (change.type === 'removed') {\n            const id = doc.id\n            gamesRef.current = gamesRef.current.filter((game) => game.id !== id)\n          }\n        })\n        setGames(gamesRef.current)\n      })\n\n    return () => {\n      unsubGames()\n    }\n  }, [user])\n\n  const notStarted = games.filter((game) => !game.currentPlayer)\n  const playing = games.filter((game) => game.state === 'PLAYING')\n  const done = games.filter((game) => game.state === 'DONE')\n\n  return (\n    <List mt={4}>\n      {notStarted.length > 0 && <Heading>Not started</Heading>}\n      {notStarted.map((game) => {\n        return <GameItem game={game} />\n      })}\n      {playing.length > 0 && <Heading>Playing</Heading>}\n      {playing.map((game) => {\n        return <GameItem game={game} />\n      })}\n      {done.length > 0 && <Heading>Finished</Heading>}\n      {done.map((game) => {\n        return <GameItem game={game} />\n      })}\n    </List>\n  )\n}\n\nexport default GameList\n","import { Box, Grid, Heading, Text } from '@chakra-ui/core'\nimport React, { useContext, useEffect, useState, FC } from 'react'\nimport AddFriends from '../components/AddFriends'\nimport FriendList from '../components/FriendList'\nimport FriendRequests from '../components/FriendRequests'\nimport GameChallenges from '../components/GameChallenges'\nimport GameList from '../components/GameList'\nimport UserContext from '../context/userContext'\nimport { firestore } from '../firebaseApp'\nimport RaisedButton from '../components/UI/RaisedButton'\n\nexport interface MatchmakingProps {\n  onStartMatchmaking: () => void\n  onStopMatchmaking: () => void\n  isMatchmaking: boolean\n  time: number\n}\n\nconst Home: FC<MatchmakingProps> = ({ onStartMatchmaking, onStopMatchmaking, isMatchmaking, time }) => {\n  const { displayName, friendCode } = useContext(UserContext)\n\n  return (\n    <Grid maxW=\"1200px\" margin=\"0 auto\" templateColumns={{ base: '1fr', md: '2fr 1fr' }} p={4} gridGap={6}>\n      <Box bg=\"purple.800\" p={4} rounded=\"lg\" boxShadow=\"0px 0px 0px 8px #6B46C1\">\n        {!isMatchmaking ? (\n          <RaisedButton w=\"100%\" justifyContent=\"center\" variantColor=\"teal.400\" onClick={onStartMatchmaking}>\n            <Text fontSize=\"1.25rem\" fontWeight=\"700\" color=\"white\" textShadow=\"1px 1px 0px rgba(0,0,0,0.2)\">\n              Search for opponent\n            </Text>\n          </RaisedButton>\n        ) : (\n          <RaisedButton w=\"100%\" justifyContent=\"center\" variantColor=\"teal.400\" onClick={onStopMatchmaking}>\n            <Text fontSize=\"1.25rem\" fontWeight=\"700\" color=\"white\" textShadow=\"1px 1px 0px rgba(0,0,0,0.2)\">\n              Searching for opponent ... {time}\n            </Text>\n          </RaisedButton>\n        )}\n        <GameList />\n      </Box>\n      <Box bg=\"purple.800\" p={4} rounded=\"lg\" boxShadow=\"0px 0px 0px 8px #6B46C1\">\n        <Heading>{displayName}</Heading>\n        <Heading size=\"md\">Friend code: {friendCode}</Heading>\n        <Heading mt={8} mb={2} size=\"md\" fontWeight=\"900\" textShadow=\"1px 1px 0px rgba(0,0,0,0.4)\" letterSpacing=\"1px\">\n          Friends\n        </Heading>\n        <FriendList />\n        <Heading mt={8} mb={2} size=\"md\" fontWeight=\"900\" textShadow=\"1px 1px 0px rgba(0,0,0,0.4)\" letterSpacing=\"1px\">\n          Add new friends\n        </Heading>\n        <AddFriends />\n      </Box>\n    </Grid>\n  )\n}\n\nexport default Home\n","import React, { useState } from 'react'\nimport { Box, Flex, FormControl, FormLabel, Input, FormErrorMessage, Button } from '@chakra-ui/core'\nimport { auth } from '../firebaseApp'\nimport RaisedButton from '../components/UI/RaisedButton'\n\ninterface EmailSigninError {\n  code: string\n  message: string\n}\n\nconst Login = () => {\n  const [email, setEmail] = useState<string>('')\n  const [password, setPassword] = useState<string>('')\n  const [formError, setFormError] = useState<EmailSigninError>()\n  const [isLoggingIn, setIsLoggingIn] = useState<boolean>(false)\n\n  const handleSubmit = async (event: React.FormEvent<HTMLFormElement>) => {\n    event.preventDefault()\n    try {\n      setIsLoggingIn(true)\n      await auth.signInWithEmailAndPassword(email, password)\n      setFormError(undefined)\n      setIsLoggingIn(false)\n    } catch (error) {\n      setFormError(error)\n      setIsLoggingIn(false)\n    }\n  }\n\n  const signInAnonymously = async () => {\n    try {\n      await auth.signInAnonymously()\n    } catch (error) {\n      console.error(error)\n    }\n  }\n\n  return (\n    <Flex align=\"center\" justify=\"center\" w=\"100%\" minH=\"100vh\" bg=\"purple.600\">\n      <Flex direction=\"column\">\n        <RaisedButton onClick={signInAnonymously} variantColor=\"orange.400\" p={8} fontSize=\"2rem\" color=\"white\">\n          Click to play\n        </RaisedButton>\n        <Box as=\"form\" mt={12} onSubmit={handleSubmit}>\n          <FormControl isInvalid={!!formError}>\n            <FormLabel htmlFor=\"email\">Email</FormLabel>\n            <Input\n              name=\"email\"\n              placeholder=\"E-mail\"\n              value={email}\n              onChange={(event: React.ChangeEvent<HTMLInputElement>) => setEmail(event.target.value)}\n            />\n            <FormLabel htmlFor=\"password\">Password</FormLabel>\n            <Input\n              name=\"password\"\n              type=\"password\"\n              placeholder=\"Password\"\n              value={password}\n              onChange={(event: React.ChangeEvent<HTMLInputElement>) => setPassword(event.target.value)}\n            />\n            <FormErrorMessage>{formError && formError.message}</FormErrorMessage>\n          </FormControl>\n          <Button mt={4} variantColor=\"teal\" isLoading={isLoggingIn} type=\"submit\">\n            Sign in with email/password\n          </Button>\n        </Box>\n      </Flex>\n    </Flex>\n  )\n}\n\nexport default Login\n","import React, { FC } from 'react'\nimport { Grid, Flex, Heading, Text, Box, Link, Icon } from '@chakra-ui/core'\n\nconst Footer: FC = () => {\n  return (\n    <Flex align=\"center\" justify=\"center\" flexWrap=\"wrap\" pt={8}>\n      <Flex flexDir=\"column\" p={4}>\n        <Heading size=\"md\">BETA</Heading>\n        <Text maxW=\"400px\">\n          This game is currently in a public beta, and that means stuff might be a little unstable and any game or user\n          date may be reset at any time.\n        </Text>\n      </Flex>\n      <Flex flexDir=\"column\" p={4}>\n        <Heading size=\"md\">Got feedback?</Heading>\n        <Text maxW=\"400px\">\n          Please join our{' '}\n          <Link textDecoration=\"underline\" color=\"purple.100\" href=\"http://discord.gg/vjWAPvC\" isExternal>\n            Discord <Icon name=\"external-link\" mx=\"2px\" />\n          </Link>{' '}\n          and give your feedback in the #beta-feedback channel.\n        </Text>\n      </Flex>\n      <Flex flexDir=\"column\" p={4}>\n        <Heading size=\"md\">Developed live on Twitch</Heading>\n        <Text maxW=\"400px\" mb={2}>\n          If you would like to see how this game develops, please checkout our{' '}\n          <Link textDecoration=\"underline\" color=\"purple.100\" href=\"https://twitch.tv/codepurpl\" isExternal>\n            Twitch stream. <Icon name=\"external-link\" mx=\"2px\" />\n          </Link>\n        </Text>\n        Copyright  2020 - Purpl AS\n      </Flex>\n    </Flex>\n  )\n}\n\nexport default Footer\n","import { Box, Spinner } from '@chakra-ui/core'\nimport firebase from 'firebase'\nimport React, { useEffect, useRef, useState } from 'react'\nimport { Route, Switch, useHistory } from 'react-router-dom'\nimport Header from './components/Header'\nimport UserContext from './context/userContext'\nimport { auth, firestore } from './firebaseApp'\nimport FirebaseMatchmakingManager from './FirebaseMatchmakingManager'\nimport Game from './pages/Game'\nimport Home from './pages/Home'\nimport Login from './pages/Login'\nimport Footer from './components/Footer'\n\nconst matchmakingManager = new FirebaseMatchmakingManager()\n\nconst App = () => {\n  const [user, setUser] = useState<firebase.User | null>(null)\n  const timerRef = useRef<NodeJS.Timeout>()\n  const matchmakingListener = useRef<() => void>()\n\n  const history = useHistory()\n\n  const [time, setTime] = useState<number>(0)\n  const [isMatchmaking, setIsMatchmaking] = useState<boolean>(false)\n\n  const [initialLoad, setInitialLoad] = useState<boolean>(true)\n\n  const startMatchmaking = async () => {\n    if (!user) return\n    setIsMatchmaking(true)\n    startTimer()\n    await matchmakingManager.joinQueue(user.uid)\n    matchmakingManager.subMatchmaking(\n      user.uid,\n      (snapshot) => {\n        if (snapshot.data()?.gameId) {\n          stopMatchmaking()\n          history.push(`/game/${snapshot.data()?.gameId}`)\n        }\n      },\n      (error) => {\n        console.error(error)\n      }\n    )\n  }\n\n  const startTimer = () => {\n    timerRef.current = setInterval(() => {\n      setTime((time) => time + 1)\n    }, 1000)\n  }\n\n  const stopTimer = (timerRef: React.MutableRefObject<NodeJS.Timeout | undefined>) => {\n    timerRef.current && clearInterval(timerRef.current)\n  }\n\n  const stopMatchmaking = () => {\n    if (!user) return\n    setIsMatchmaking(false)\n    stopTimer(timerRef)\n    setTime(0)\n    matchmakingListener.current && matchmakingListener.current()\n    matchmakingManager.exitQueue(user.uid)\n  }\n\n  useEffect(() => {\n    const unsubAuth = auth.onAuthStateChanged(async (user) => {\n      if (user) {\n        setUser(user)\n      } else {\n        setUser(null)\n        try {\n          //await auth.signInAnonymously()\n        } catch (error) {\n          console.error(error)\n        }\n      }\n      setInitialLoad(false)\n    })\n\n    return () => {\n      unsubAuth()\n      matchmakingManager.unsubMatchmaking()\n    }\n  }, [])\n\n  const [userData, setUserData] = useState<any>({})\n\n  useEffect(() => {\n    if (!user) return\n\n    const unsubUserdata = firestore\n      .collection('users')\n      .doc(user?.uid)\n      .onSnapshot((snapshot) => {\n        if (snapshot.exists) {\n          setUserData(snapshot.data())\n        }\n      })\n\n    return () => {\n      unsubUserdata()\n    }\n  }, [user])\n\n  if (initialLoad)\n    return (\n      <Box as=\"main\" h=\"100vh\" overflow=\"auto\" bg=\"gray.900\" color=\"white\">\n        <Spinner\n          color=\"white\"\n          position=\"absolute\"\n          top=\"50%\"\n          left=\"50%\"\n          transform=\"translate3d(-50%, -50%, 0)\"\n          size=\"xl\"\n        />\n      </Box>\n    )\n\n  if (!user) {\n    return <Login></Login>\n  }\n\n  return (\n    <UserContext.Provider\n      value={{ user, displayName: userData.displayName || '', friendCode: userData.friendCode || '' }}\n    >\n      <Box\n        as=\"main\"\n        h=\"100vh\"\n        overflow=\"auto\"\n        background=\"linear-gradient(152deg, #6B46C1 0%, #553C9A 100%)\"\n        color=\"white\"\n      >\n        <Header></Header>\n\n        <Switch>\n          <Route path=\"/game/:gameId\">\n            <Game />\n          </Route>\n          <Route path=\"/\">\n            <Home\n              onStartMatchmaking={startMatchmaking}\n              onStopMatchmaking={stopMatchmaking}\n              isMatchmaking={isMatchmaking}\n              time={time}\n            />\n          </Route>\n        </Switch>\n        <Footer></Footer>\n      </Box>\n    </UserContext.Provider>\n  )\n}\n\nexport default App\n","import { theme } from '@chakra-ui/core'\n\n// Let's say you want to add custom colors\nconst customTheme = {\n  ...theme,\n  fonts: {\n    heading: `'Nunito', -apple-system, BlinkMacSystemFont, \"Segoe UI\", Helvetica, Arial, sans-serif, \"Apple Color Emoji\", \"Segoe UI Emoji\", \"Segoe UI Symbol\"`,\n    body: `'Nunito', -apple-system, BlinkMacSystemFont, \"Segoe UI\", Helvetica, Arial, sans-serif, \"Apple Color Emoji\", \"Segoe UI Emoji\", \"Segoe UI Symbol\"`,\n    mono: `SFMono-Regular,Menlo,Monaco,Consolas,\"Liberation Mono\",\"Courier New\",monospace`,\n  },\n}\n\nexport default customTheme\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './App'\nimport { ThemeProvider, CSSReset, ColorModeProvider } from '@chakra-ui/core'\nimport { BrowserRouter as Router } from 'react-router-dom'\nimport theme from './theme'\n\nReactDOM.render(\n  <React.StrictMode>\n    <ThemeProvider theme={theme}>\n      <ColorModeProvider value=\"light\">\n        <CSSReset />\n        <Router>\n          <App />\n        </Router>\n      </ColorModeProvider>\n    </ThemeProvider>\n  </React.StrictMode>,\n  document.getElementById('root')\n)\n"],"sourceRoot":""}