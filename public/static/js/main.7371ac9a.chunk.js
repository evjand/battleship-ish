(this.webpackJsonpweb=this.webpackJsonpweb||[]).push([[0],{101:function(e,t,n){e.exports=n(146)},146:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(37),o=n.n(c),i=n(10),l=n.n(i),u=n(17),s=n(8),d=n(4),p=n(99),m=n(27),f=n(86),b=n(161),h=n(162),v=n(44),x=r.a.createContext({user:null,displayName:"",friendCode:""}),g=n(85),E=(n(107),n(108),n(110),g.initializeApp({apiKey:"AIzaSyDlxImm5-7T7AzdMAbJO-86ijR1c5g6vDM",authDomain:"battleship-ish.firebaseapp.com",databaseURL:"https://battleship-ish.firebaseio.com",projectId:"battleship-ish",storageBucket:"battleship-ish.appspot.com",messagingSenderId:"57723460313",appId:"1:57723460313:web:f55fa72d03e38eea77bcc8"})),j=E.auth(),y=E.firestore(),O=E.functions("europe-west1"),w=n(12),C=n(13),S=n(152),k=n(153),I=n(68),M=n(70),A=n(24),W=function(e){var t=e.children,n=e.variantColor,a=void 0===n?"purple.300":n,c=e.isLoading,o=(e.isDisabled,Object(M.a)(e,["children","variantColor","isLoading","isDisabled"])),i=a.split("."),l=parseInt(i[1],10),u=i[0];return r.a.createElement(A.a,Object.assign({as:"button",d:"flex",bg:a,p:2,alignItems:"center",borderRadius:6,borderBottomColor:"".concat(u,".").concat(Math.min(l+100,900)),borderBottomWidth:4,transition:"all 0.2s ease",outline:"none",position:"relative",_hover:{backgroundColor:"".concat(u,".").concat(Math.min(l+100,900)),borderBottomColor:"".concat(u,".").concat(Math.min(l+200,900))},_focus:{boxShadow:"outline"},_active:{borderBottomWidth:"2px",mt:"2px"},_disabled:{opacity:.5,cursor:"not-allowed"}},o),r.a.createElement(f.a,{opacity:c?0:1},t),r.a.createElement(p.a,{opacity:c?1:0,pos:"absolute",top:"calc(50% - 12px)",left:"calc(50% - 12px)",w:"24px",h:"24px"}))},z=function(e){var t=e.children,n=e.variantColor,a=void 0===n?"purple.400":n,c=e.isDisabled,o=e.isLoading,i=Object(M.a)(e,["children","variantColor","isDisabled","isLoading"]),l=a.split("."),u=parseInt(l[1],10),s=l[0];return r.a.createElement(A.a,Object.assign({as:"button",d:"flex",bg:a,py:2,pb:1,px:4,alignItems:"center",borderRadius:6,borderBottomColor:"".concat(s,".").concat(Math.min(u+100,900)),borderBottomWidth:4,transition:"all 0.2s ease",outline:"none",pos:"relative","aria-disabled":c,_hover:{backgroundColor:"".concat(s,".").concat(Math.min(u+100,900)),borderBottomColor:"".concat(s,".").concat(Math.min(u+200,900))},_focus:{boxShadow:"outline"},_active:{borderBottomWidth:"2px",mt:"2px"},_disabled:{opacity:.5,cursor:"not-allowed"}},i),r.a.createElement(f.a,{opacity:o?0:1},t),r.a.createElement(p.a,{opacity:o?1:0,pos:"absolute",top:"calc(50% - 12px)",left:"calc(50% - 12px)",w:"24px",h:"24px"}))},D=n(31),R=n.n(D),P=n(61),B=n.n(P),N=n(62),L=n.n(N),F=n(63),_=n.n(F),q=new R.a(B.a,{volume:.5,throttleMs:100}),T=new R.a(L.a,{volume:.5,throttleMs:100}),U=new R.a(_.a,{volume:.5,throttleMs:100}),Y=function(){var e=Object(a.useContext)(x).user,t=Object(a.useRef)([]),n=Object(a.useState)([]),c=Object(s.a)(n,2),o=c[0],i=c[1],p=Object(a.useState)([]),m=Object(s.a)(p,2),b=m[0],h=m[1];Object(a.useEffect)((function(){if(e){var n=y.collection("users").doc(null===e||void 0===e?void 0:e.uid).collection("friend-requests").onSnapshot((function(e){e.docChanges().forEach((function(e){var n=e.doc;if("added"===e.type){var a=Object(C.a)({},n.data(),{id:n.id});t.current=[].concat(Object(w.a)(t.current),[a]),q.play()}if("modified"===e.type){var r=n.id;t.current=t.current.map((function(e){return e.id!==r?e:Object(C.a)({},n.data(),{id:n.id})}))}if("removed"===e.type){var c=n.id;t.current=t.current.filter((function(e){return e.id!==c}))}})),i(t.current)}));return function(){n()}}}),[e]);var v=function(){var e=Object(u.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!b.includes(t)){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,h((function(e){return[].concat(Object(w.a)(e),[t])})),n=O.httpsCallable("acceptFriendRequest"),e.next=7,n({userId:t});case 7:T.play(),h((function(e){return e.filter((function(e){return e!==t}))})),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(2),h((function(e){return e.filter((function(e){return e!==t}))})),console.error(e.t0);case 15:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(t){return e.apply(this,arguments)}}(),g=function(){var t=Object(u.a)(l.a.mark((function t(n){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!b.includes(n)){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,h((function(e){return[].concat(Object(w.a)(e),[n])})),t.next=6,y.collection("users").doc(null===e||void 0===e?void 0:e.uid).collection("friend-requests").doc(n).delete();case 6:U.play(),h((function(e){return e.filter((function(e){return e!==n}))})),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(2),h((function(e){return e.filter((function(e){return e!==n}))})),console.error(t.t0);case 14:case"end":return t.stop()}}),t,null,[[2,10]])})));return function(e){return t.apply(this,arguments)}}();return r.a.createElement(S.a,null,r.a.createElement(S.f,null,r.a.createElement(d.a,{as:"button",w:"32px",h:"32px",mr:4,pos:"relative"},r.a.createElement("img",{src:"/icons/users.svg",alt:""}),o.length>0&&r.a.createElement(d.a,{pos:"absolute",display:"fled",justifyContent:"center",alignItems:"center",w:5,h:5,borderRadius:"full",bg:"red.500",color:"white",fontSize:"0.75rem",fontWeight:"800",top:"-0.5rem",right:"-0.5rem"},o.length))),r.a.createElement(S.d,{zIndex:4,w:"400px",maxW:"calc(100% - 32px)",bg:"purple.600",borderColor:"purple.700"},r.a.createElement(S.b,null),r.a.createElement(S.e,{borderColor:"purple.700"},"Friend requests"),r.a.createElement(S.c,null,r.a.createElement(k.b,null,o.map((function(e){return r.a.createElement(k.a,{d:"flex",p:2,alignItems:"center",justifyContent:"space-between",key:e.id,borderBottom:"1px solid",borderColor:"purple.700"},r.a.createElement(I.a,{whiteSpace:"nowrap",mr:4},e.displayName),r.a.createElement(f.a,null,r.a.createElement(z,{isLoading:b.includes(e.id),isDisabled:b.includes(e.id),mr:2,variantColor:"green.400",onClick:function(){return v(e.id)}},r.a.createElement(d.a,{w:"32px",h:"32px",mr:2},r.a.createElement("img",{src:"/icons/like.svg",alt:""})),r.a.createElement(I.a,{fontSize:"1.25rem",fontWeight:"700",color:"white",textShadow:"1px 1px 0px rgba(0,0,0,0.2)"},"Accept")),r.a.createElement(W,{isLoading:b.includes(e.id),isDisabled:b.includes(e.id),variantColor:"red.400",onClick:function(){return g(e.id)}},r.a.createElement(d.a,{w:"32px",h:"32px"},r.a.createElement("img",{src:"/icons/bad.svg",alt:""})))))}))))))},G=new R.a(B.a,{volume:.5,throttleMs:100}),H=new R.a(L.a,{volume:.5,throttleMs:100}),Q=new R.a(_.a,{volume:.5,throttleMs:100}),J=function(){var e=Object(a.useContext)(x).user,t=Object(a.useRef)([]),n=Object(a.useState)([]),c=Object(s.a)(n,2),o=c[0],i=c[1],p=Object(a.useState)([]),m=Object(s.a)(p,2),b=m[0],h=m[1];Object(a.useEffect)((function(){if(e){var n=y.collection("users").doc(null===e||void 0===e?void 0:e.uid).collection("challenges").onSnapshot((function(e){e.docChanges().forEach((function(e){var n=e.doc;if("added"===e.type){var a=Object(C.a)({},n.data(),{id:n.id});t.current=[].concat(Object(w.a)(t.current),[a]),G.play()}if("modified"===e.type){var r=n.id;t.current=t.current.map((function(e){return e.id!==r?e:Object(C.a)({},n.data(),{id:n.id})}))}if("removed"===e.type){var c=n.id;t.current=t.current.filter((function(e){return e.id!==c}))}})),i(t.current)}));return function(){n()}}}),[e]);var v=function(){var t=Object(u.a)(l.a.mark((function t(n){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!b.includes(n)){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,h((function(e){return[].concat(Object(w.a)(e),[n])})),t.next=6,y.collection("users").doc(null===e||void 0===e?void 0:e.uid).collection("challenges").doc(n).delete();case 6:Q.play(),h((function(e){return e.filter((function(e){return e!==n}))})),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(2),h((function(e){return e.filter((function(e){return e!==n}))})),console.error(t.t0);case 14:case"end":return t.stop()}}),t,null,[[2,10]])})));return function(e){return t.apply(this,arguments)}}(),g=function(){var e=Object(u.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!b.includes(t)){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,h((function(e){return[].concat(Object(w.a)(e),[t])})),n=O.httpsCallable("acceptChallenge"),e.next=7,n({userId:t});case 7:H.play(),h((function(e){return e.filter((function(e){return e!==t}))})),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(2),h((function(e){return e.filter((function(e){return e!==t}))})),console.error(e.t0);case 15:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(S.a,null,r.a.createElement(S.f,null,r.a.createElement(d.a,{as:"button",w:"32px",h:"32px",mr:4,pos:"relative"},r.a.createElement("img",{src:"/icons/bell.svg",alt:""}),o.length>0&&r.a.createElement(d.a,{pos:"absolute",display:"fled",justifyContent:"center",alignItems:"center",w:5,h:5,borderRadius:"full",bg:"red.500",color:"white",fontSize:"0.75rem",fontWeight:"800",top:"-0.5rem",right:"-0.5rem"},o.length))),r.a.createElement(S.d,{zIndex:4,w:"400px",maxW:"calc(100% - 32px)",bg:"purple.600",borderColor:"purple.700"},r.a.createElement(S.b,null),r.a.createElement(S.e,{borderColor:"purple.700"},"Game challenges"),r.a.createElement(S.c,null,r.a.createElement(k.b,null,o.map((function(e){return r.a.createElement(k.a,{d:"flex",p:2,alignItems:"center",justifyContent:"space-between",key:e.id,borderBottom:"1px solid",borderColor:"purple.700"},r.a.createElement(I.a,{whiteSpace:"nowrap",mr:4},e.displayName),r.a.createElement(f.a,null,r.a.createElement(z,{isLoading:b.includes(e.id),isDisabled:b.includes(e.id),mr:2,variantColor:"green.400",onClick:function(){return g(e.userId)}},r.a.createElement(d.a,{w:"32px",h:"32px",mr:2},r.a.createElement("img",{src:"/icons/like.svg",alt:""})),r.a.createElement(I.a,{fontSize:"1.25rem",fontWeight:"700",color:"white",textShadow:"1px 1px 0px rgba(0,0,0,0.2)"},"Accept")),r.a.createElement(W,{isLoading:b.includes(e.id),isDisabled:b.includes(e.id),variantColor:"red.400",onClick:function(){return v(e.id)}},r.a.createElement(d.a,{w:"32px",h:"32px"},r.a.createElement("img",{src:"/icons/bad.svg",alt:""})))))}))))))},V=n(154),K=n(69),X=n.n(K),Z=function(){var e=Object(a.useContext)(x).user,t=Object(a.useRef)([]),n=Object(a.useState)([]),c=Object(s.a)(n,2),o=c[0],i=c[1];Object(a.useEffect)((function(){if(e){var n=y.collection("presence").onSnapshot((function(e){e.docChanges().forEach((function(e){var n=e.doc;if("added"===e.type){var a=Object(C.a)({},n.data(),{id:n.id});t.current=[].concat(Object(w.a)(t.current),[a])}if("modified"===e.type){var r=n.id;t.current=t.current.map((function(e){return e.id!==r?e:Object(C.a)({},n.data(),{id:n.id})}))}if("removed"===e.type){var c=n.id;t.current=t.current.filter((function(e){return e.id!==c}))}})),i(t.current)}));return d(e.uid),m(),function(){n(),p(e.uid)}}}),[e]);var d=function(){var e=Object(u.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y.collection("presence").doc(t).set({lastOnline:X.a.firestore.FieldValue.serverTimestamp()});case 3:e.next=9;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(t),console.log("Cant add presence");case 9:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}(),p=function(){var e=Object(u.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y.collection("presence").doc(t).delete();case 3:e.next=10;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(t),console.log("Cant delete presence"),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}(),m=function(){e&&window.addEventListener("beforeunload",(function(t){return t.preventDefault(),p(e.uid)}))};return r.a.createElement(V.a,null,"Users online: ",o.length)},$=function(){var e,t=Object(a.useContext)(x).user;return r.a.createElement(f.a,{px:4,align:"center",justify:"space-between",bg:"purple.800",borderBottomWidth:"2px",borderBottomColor:"purple.900",w:"100%",h:"5rem"},r.a.createElement(v.b,{to:"/"},"FireShips"),r.a.createElement(Z,null),r.a.createElement(f.a,null,r.a.createElement(Y,null),r.a.createElement(J,null),r.a.createElement(b.d,null,r.a.createElement(b.a,null,r.a.createElement(h.a,{size:"sm",name:null!==(e=null===t||void 0===t?void 0:t.displayName)&&void 0!==e?e:void 0})),r.a.createElement(b.c,{border:"none",boxShadow:"md",bg:"purple.500"},r.a.createElement(b.b,{_hover:{backgroundColor:"purple.600"},_focus:{backgroundColor:"purple.600"},onClick:function(){j.signOut()}},"Sign out")))))},ee=n(22),te=function e(){var t=this;Object(ee.a)(this,e),this.matchmakingListener=null,this.joinQueue=function(e){return y.collection("matchmaking").doc(e).set({created:X.a.firestore.FieldValue.serverTimestamp()})},this.exitQueue=function(e){return y.collection("matchmaking").doc(e).delete()},this.subMatchmaking=function(e,n,a){t.matchmakingListener=y.collection("matchmaking").doc(e).onSnapshot({includeMetadataChanges:!1},n,a)},this.unsubMatchmaking=function(){t.matchmakingListener&&t.matchmakingListener()}},ne=n(18),ae=n(159),re=n(155),ce=n(163),oe=function(e){var t=e.xIndex,n=e.yIndex,c=e.game,o=e.trySquare,i=e.isPersonalBoard,l=Object(a.useContext)(x).user,u=null===c||void 0===c?void 0:c.players.find((function(e){return e!==l.uid})),s="x".concat(t,"y").concat(n),d=c.hits[i?u:l.uid].flatMap((function(e){return e.hits.map((function(t){return{square:t,sunk:e.sunk}}))})).find((function(e){return e.square===s})),p=c.tries[i?u:l.uid].includes(s);return r.a.createElement(A.a,{as:p||i?"div":"button",onClick:function(){return o(s)},key:"".concat(t,"-").concat(n),"aria-disabled":p,border:"2px solid",borderColor:d&&d.sunk?"red.800":"blue.500",borderRadius:"none",w:"100%",p:0,paddingTop:"calc(100% - 4px)",minW:"auto",h:"auto",_hover:{boxShadow:p||i?"none":"inset 0px 0px 0px 2px red"},_disabled:{boxShadow:"none",cursor:"default"},_active:{},opacity:d&&d.sunk?.8:1,transition:"none",backgroundRepeat:"no-repeat",backgroundPosition:"center center",backgroundSize:"80%",backgroundColor:d?d.sunk?"red.800":"blue.800":p?"blue.800":"blue.700",backgroundImage:d?"url(/icons/explosion.svg)":p?"url(/icons/miss.svg)":"none"})},ie=n(91),le=Array.from(Array(10)).map((function(){return Array.from(Array(10)).map((function(){return!1}))})),ue={carrier:{x:0,y:0,rotated:!1},battleship:{x:0,y:1,rotated:!1},destroyer:{x:0,y:2,rotated:!1},submarine:{x:0,y:3,rotated:!1},patrol:{x:0,y:4,rotated:!1}},se={carrier:5,battleship:4,destroyer:3,submarine:3,patrol:2},de=function(e){var t=e.onShipsPlaced,n=Object(a.useRef)(),c=Object(a.useRef)(""),o=Object(a.useState)(ue),i=Object(s.a)(o,2),l=i[0],u=i[1],p=Object(a.useState)(),m=Object(s.a)(p,2),b=m[0],h=m[1],v=Object(a.useState)(0),x=Object(s.a)(v,2),g=x[0],E=x[1],j=Object(a.useState)(!1),y=Object(s.a)(j,2),O=y[0],S=y[1],k=Object(ie.a)({onDrag:function(e){var t=Object(s.a)(e.movement,2),n=t[0],a=t[1];I(n,a)},onDragStart:function(e){var t=e.event;M(t.target)},onDragEnd:function(e){var t=Object(s.a)(e.movement,2),n=t[0],a=t[1];A(n,a)}}),I=function(e,t){var n=l[c.current],a=Math.min(10-(n.rotated?1:se[c.current]),Math.max(0,n.x+Math.floor(e/g))),r=Math.min(10-(n.rotated?se[c.current]:1),Math.max(0,n.y+Math.floor(t/g))),o=Object(C.a)({},n,{x:a,y:r});h(Object(C.a)({},l,Object(ne.a)({},c.current,o)))},M=function(e){var t=e;c.current=t.dataset.ship||c.current},A=function(e,n){var a=l[c.current],r=Math.min(10-(a.rotated?1:se[c.current]),Math.max(0,a.x+Math.floor(e/g))),o=Math.min(10-(a.rotated?se[c.current]:1),Math.max(0,a.y+Math.floor(n/g))),i=Object(C.a)({},a,{x:r,y:o}),d=Object(C.a)({},l,Object(ne.a)({},c.current,i));u(d),h(void 0);var p=Object.entries(d).reduce((function(e,t){var n=Object(s.a)(t,2),a=n[0],r=n[1];return Object(C.a)({},e,Object(ne.a)({},a,{positions:Object(w.a)(Array(se[a])).map((function(e,t){return r.rotated?"x".concat(r.x,"y").concat(r.y+t):"x".concat(r.x+t,"y").concat(r.y)}))}))}),{}),m=Object.values(p).map((function(e){return e.positions})).flat(),f=new Set(m).size!==m.length;t(p,f)};Object(a.useEffect)((function(){var e=Object.entries(l).map((function(e){var t=Object(s.a)(e,2),n=t[0],a=t[1];return Object(w.a)(Array(se[n])).map((function(e,t){return a.rotated?"x".concat(a.x,"y").concat(a.y+t):"x".concat(a.x+t,"y").concat(a.y)}))})),n=Object.entries(l).reduce((function(e,t){var n=Object(s.a)(t,2),a=n[0],r=n[1];return Object(C.a)({},e,Object(ne.a)({},a,{positions:Object(w.a)(Array(se[a])).map((function(e,t){return r.rotated?"x".concat(r.x,"y").concat(r.y+t):"x".concat(r.x+t,"y").concat(r.y)}))}))}),{}),a=e.flat(),r=new Set(a).size!==a.length;S(r),t(n,r)}),[l]),Object(a.useEffect)((function(){var e=(n.current.getBoundingClientRect().width-4)/10;E(e)}),[]);var W=function(e){return"".concat(b?b[e].y*g:l[e].y*g,"px")},z=function(e){return"".concat(b?b[e].x*g:l[e].x*g,"px")},D=function(e){return l[e].rotated?"".concat(g-16,"px"):"".concat(se[e]*g-16,"px")},R=function(e){return l[e].rotated?"".concat(se[e]*g-16,"px"):"".concat(g-16,"px")};return r.a.createElement(r.a.Fragment,null,r.a.createElement(re.a,{gridTemplateColumns:"repeat(10, 1fr)",w:"100%",maxW:"550px",margin:"0 auto",border:"2px solid",borderColor:"blue.500",pos:"relative",ref:n},le.map((function(e,t){return e.map((function(e,n){return r.a.createElement(d.a,{key:"".concat(t,"-").concat(n),outline:"none",border:"2px solid",borderColor:"blue.500",w:"100%",paddingTop:"calc(100% - 4px)",bg:"blue.700"})}))})),Object.keys(l).map((function(e){return r.a.createElement(d.a,Object.assign({key:e,style:{width:D(e),height:R(e),top:W(e),left:z(e),touchAction:"none"},borderRadius:"full",transform:"translate3d(8px, 8px, 0px)",bg:"gray.400",border:"4px solid",borderColor:c.current===e?"gray.300":"transparent",boxShadow:c.current===e?"lg":"none",zIndex:c.current===e?2:1,opacity:.95,pos:"absolute","data-ship":e},k()))}))),r.a.createElement(f.a,{pt:4,w:"200px",margin:"0 auto",flexDir:"column"},r.a.createElement(ce.a,{variantColor:"blue",isDisabled:!c.current,onClick:function(){return function(e){var t=l[e],n=t.rotated;if(n){var a=Math.min(10-se[e],t.x);u(Object(C.a)({},l,Object(ne.a)({},e,Object(C.a)({},t,{x:a,rotated:!n}))))}else{var r=Math.min(10-se[e],t.y);u(Object(C.a)({},l,Object(ne.a)({},e,Object(C.a)({},t,{y:r,rotated:!n}))))}}(c.current)}},"Rotate selected ship"),O?"Ships are overlapping":"Ships are well placed"))},pe=function(e){var t=e.isOpponent,n=e.hits;console.log(n);var a=t?-12:12,c=t?"red.400":"green.400";return r.a.createElement(d.a,{d:"flex",w:"212px",h:"32px",borderRadius:"md",bg:"purple.500",justifyContent:"space-around",p:1,mb:2,transform:"skewX(".concat(a,"deg)")},n.map((function(e){return r.a.createElement(d.a,{key:e,borderRadius:"sm",w:"8px",bg:c})})),Object(w.a)(Array.from(Array(17-n.length))).map((function(e,t){return r.a.createElement(d.a,{key:"index".concat(t),borderRadius:"sm",w:"8px",bg:"purple.400"})})))},me=n(92),fe=n.n(me),be=n(93),he=n.n(be),ve=n(94),xe=n.n(ve),ge=n(95),Ee=n.n(ge),je=new R.a(fe.a,{volume:.05,throttleMs:500}),ye=new R.a(he.a,{volume:.5,throttleMs:500}),Oe=new R.a(xe.a,{volume:.5,throttleMs:500}),we=new R.a(Ee.a,{volume:.5,throttleMs:500}),Ce=Array.from(Array(10)).map((function(){return Array.from(Array(10)).map((function(){return!1}))})),Se=[5,4,3,3,2],ke=function(){var e=Object(a.useContext)(x),t=e.user,n=e.displayName,c=Object(a.useRef)(),o=Object(ae.a)(),i=Object(m.g)().gameId,p=Object(a.useState)(),b=Object(s.a)(p,2),h=b[0],v=b[1],g=Object(a.useState)({}),E=Object(s.a)(g,2),j=E[0],S=E[1],k=Object(a.useState)(!1),M=Object(s.a)(k,2),A=M[0],W=M[1],D=Object(a.useState)(!1),R=Object(s.a)(D,2),P=R[0],B=R[1],N=Object(a.useState)(!1),L=Object(s.a)(N,2),F=L[0],_=L[1],q=Object(a.useState)([]),T=Object(s.a)(q,2),U=T[0],Y=T[1],G=Object(a.useState)(0),H=Object(s.a)(G,2),Q=H[0],J=H[1];Object(a.useEffect)((function(){if(t){var e=y.collection("games").doc(i).onSnapshot((function(e){var t=Object(C.a)({id:e.id},e.data());je.play(),v(t)}));return y.collection("users").doc(t.uid).collection("games").doc(i).get().then((function(e){console.log(e.data()),e.data().placement&&Y(e.data().placement)})).catch((function(e){console.log(e)})),function(){e()}}}),[t,i]),Object(a.useEffect)((function(){if(c.current){var e=(c.current.getBoundingClientRect().width-4)/10;J(e)}}),[F]);var K=function(e,t){var n=parseInt(e.positions[0][1],10)===parseInt(e.positions[1][1],10);return"".concat(n?Q-16:Se[t]*Q-16,"px")},X=function(e,t){var n=parseInt(e.positions[0][1],10)===parseInt(e.positions[1][1],10);return"".concat(n?Se[t]*Q-16:Q-16,"px")},Z=function(e){var t=parseInt(e.positions[0][3],10);return"".concat(t*Q,"px")},$=function(e){var t=parseInt(e.positions[0][1],10);return"".concat(t*Q,"px")},ee=function(){var e=Object(u.a)(l.a.mark((function e(n){var a,r,c,u,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((null===h||void 0===h?void 0:h.currentPlayer)===(null===t||void 0===t?void 0:t.uid)&&!P){e.next=5;break}we.play(),o({title:"Not your turn.",description:"Couldn't fire rocket, its not your turn.",status:"error",duration:3e3,isClosable:!0}),e.next=21;break;case 5:return a=O.httpsCallable("trySquare"),e.prev=6,B(!0),e.next=10,a({square:n,gameId:i});case 10:r=e.sent,c=r.data,u=c.isHit,s=c.gameIsWon,u?ye.play():Oe.play(),s&&o({title:"You one the game!!",description:"Congrats",status:"success",duration:3e3,isClosable:!0}),B(!1),e.next=21;break;case 17:e.prev=17,e.t0=e.catch(6),console.error(e.t0),B(!1);case 21:case"end":return e.stop()}}),e,null,[[6,17]])})));return function(t){return e.apply(this,arguments)}}(),te=function(){var e=Object(u.a)(l.a.mark((function e(){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(5===Object.keys(j).length){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,y.collection("placements").doc(i).update(Object(ne.a)({},t.uid,Object.values(j)));case 5:n=[].concat(Object(w.a)((null===h||void 0===h?void 0:h.hasPlaced)||[]),[null===t||void 0===t?void 0:t.uid]),y.collection("games").doc(i).update({hasPlaced:n}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),console.error(e.t0);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(){return e.apply(this,arguments)}}();if(!(null===h||void 0===h?void 0:h.players))return r.a.createElement(I.a,null,"Loading");var ie=null===h||void 0===h?void 0:h.players.find((function(e){return e!==t.uid}));return r.a.createElement(f.a,{direction:"column",justify:"space-between"},r.a.createElement(f.a,{direction:"column",p:2},h.winner&&r.a.createElement(V.a,null,"Winner ",h.winner===(null===t||void 0===t?void 0:t.uid)?"You won":"Your opponent won"),"PLAYING"===h.state?r.a.createElement(r.a.Fragment,null,r.a.createElement(V.a,{textAlign:"center"},h.currentPlayer===(null===t||void 0===t?void 0:t.uid)?"Your":"Opponents"," turn"),r.a.createElement(f.a,{flexWrap:"wrap",justifyContent:"space-between",w:"100%",maxW:"550px",margin:"0 auto",mb:2},r.a.createElement(d.a,null,r.a.createElement(I.a,{fontSize:"0.75rem"},n),h.hits&&r.a.createElement(pe,{isOpponent:!1,hits:h.hits[t.uid].flatMap((function(e){return e.hits}))})),r.a.createElement(d.a,{ml:"auto",textAlign:"right"},r.a.createElement(I.a,{fontSize:"0.75rem"},ie||"Opponent"),h.hits&&r.a.createElement(pe,{isOpponent:!0,hits:h.hits[ie].flatMap((function(e){return e.hits}))}))),F?r.a.createElement(re.a,{gridTemplateColumns:"repeat(10, 1fr)",w:"100%",maxW:"550px",margin:"0 auto",border:"2px solid",borderColor:"blue.500",position:"relative",ref:c},Ce.map((function(e,t){return e.map((function(e,n){return r.a.createElement(oe,{xIndex:n,yIndex:t,game:h,trySquare:ee,isPersonalBoard:!0})}))})),U.map((function(e,t){return r.a.createElement(d.a,{style:{width:K(e,t),height:X(e,t),top:Z(e),left:$(e)},borderRadius:"full",transform:"translate3d(8px, 8px, 0px)",bg:"gray.400",border:"4px solid",opacity:.35,pos:"absolute"})}))):r.a.createElement(re.a,{gridTemplateColumns:"repeat(10, 1fr)",w:"100%",maxW:"550px",margin:"0 auto",border:"2px solid",borderColor:"blue.500",boxShadow:h.currentPlayer===(null===t||void 0===t?void 0:t.uid)?"0px 0px 48px #FFEB3B":"none"},Ce.map((function(e,t){return e.map((function(e,n){return r.a.createElement(oe,{xIndex:n,yIndex:t,game:h,trySquare:ee,isPersonalBoard:!1})}))}))),r.a.createElement(f.a,{margin:"0 auto",p:8},r.a.createElement(ce.a,{mr:2,variantColor:"teal",isDisabled:!F,onClick:function(){return _(!1)}},"Playing board"),r.a.createElement(ce.a,{variantColor:"teal",isDisabled:F,onClick:function(){return _(!0)}},"My board"))):h.hasPlaced&&h.hasPlaced.includes(t.uid)?r.a.createElement(V.a,{p:4,textAlign:"center"},"Waiting for opponent to place their ships"):r.a.createElement(r.a.Fragment,null,r.a.createElement(V.a,{p:4,textAlign:"center"},"Drag your ship placements"),r.a.createElement(de,{onShipsPlaced:function(e,t){S(e),W(!t)}}),r.a.createElement(d.a,{p:8},r.a.createElement(z,{w:"100%",justifyContent:"center",isDisabled:!A,onClick:function(){return te()}},r.a.createElement(I.a,{fontSize:"1.25rem",fontWeight:"700",color:"white",textShadow:"1px 1px 0px rgba(0,0,0,0.2)"},A?"Submit placement":"Position ships so they are not overlapping"))))))},Ie=n(164),Me=n(165),Ae=function(e){var t=e.friendCode,n=Object(a.useState)(""),c=Object(s.a)(n,2),o=c[0],i=c[1],d=Object(a.useState)(),p=Object(s.a)(d,2),f=p[0],b=p[1],h=Object(a.useState)(!1),v=Object(s.a)(h,2),x=v[0],g=v[1],E=Object(m.f)();Object(a.useEffect)((function(){o.length<3||w(o)}),[o]);var j=function(){var e=Object(u.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=O.httpsCallable("sendFriendRequest"),e.next=4,n({userId:t});case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.error(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),w=function(){var e=Object(u.a)(l.a.mark((function e(t){var n,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y.collection("public-users").doc(t).get();case 3:if((n=e.sent).exists){e.next=8;break}return b(void 0),console.log("No user found"),e.abrupt("return");case 8:a=n.data(),console.log(a),b(a),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(0),console.log("Error, No user found"),b(void 0);case 17:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}(),C=function(){b(void 0),i(""),E.push("/")},S=function(){var e=Object(u.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,g(!0),e.next=4,j(t);case 4:g(!1),C(),e.next=13;break;case 8:e.prev=8,e.t0=e.catch(0),g(!1),C(),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){t&&i(t)}),[t]),r.a.createElement(r.a.Fragment,null,r.a.createElement(Ie.a,{bg:"purple.400",color:"purple.900",h:"52px",border:"none",placeholder:"Friend Code",_placeholder:{color:"purple.700"},value:o,onChange:function(e){return i(e.target.value)}}),r.a.createElement(Me.a,{isOpen:!!f,onClose:C},r.a.createElement(Me.g,null),f&&r.a.createElement(Me.d,{borderRadius:"lg",bg:"purple.200"},r.a.createElement(Me.f,null,f.displayName),r.a.createElement(Me.c,null),r.a.createElement(Me.b,null),r.a.createElement(Me.e,null,r.a.createElement(z,{isDisabled:x,variantColor:"gray.400",mr:3,onClick:C},r.a.createElement(I.a,{whiteSpace:"nowrap",fontSize:"1.25rem",fontWeight:"700",color:"black"},"Close")),r.a.createElement(z,{isLoading:x,isDisabled:x,variantColor:"green.400",onClick:function(){return S(f.userId)}},r.a.createElement(I.a,{whiteSpace:"nowrap",fontSize:"1.25rem",fontWeight:"700",color:"white",textShadow:"1px 1px 0px rgba(0,0,0,0.2)"},"Add friend"))))))},We=function(){var e=Object(a.useContext)(x).user,t=Object(a.useRef)([]),n=Object(a.useState)([]),c=Object(s.a)(n,2),o=c[0],i=c[1],p=Object(a.useState)([]),m=Object(s.a)(p,2),f=m[0],b=m[1];Object(a.useEffect)((function(){if(e){var n=y.collection("users").doc(null===e||void 0===e?void 0:e.uid).collection("friends").onSnapshot((function(e){e.docChanges().forEach((function(e){var n=e.doc;if("added"===e.type){var a=Object(C.a)({},n.data(),{id:n.id});t.current=[].concat(Object(w.a)(t.current),[a])}if("modified"===e.type){var r=n.id;t.current=t.current.map((function(e){return e.id!==r?e:Object(C.a)({},n.data(),{id:n.id})}))}if("removed"===e.type){var c=n.id;t.current=t.current.filter((function(e){return e.id!==c}))}})),i(t.current)}));return function(){n()}}}),[e]);var h=function(){var e=Object(u.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!f.includes(t)){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,b((function(e){return[].concat(Object(w.a)(e),[t])})),n=O.httpsCallable("sendChallenge"),e.next=7,n({userId:t});case 7:b((function(e){return e.filter((function(e){return e!==t}))})),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(2),b((function(e){return e.filter((function(e){return e!==t}))})),console.error(e.t0);case 14:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(k.b,null,o.map((function(e){return r.a.createElement(k.a,{d:"flex",py:4,alignItems:"center",justifyContent:"space-between",key:e.id,borderBottom:"2px solid",borderColor:"purple.700"},r.a.createElement(I.a,{fontSize:"1.25rem"},e.displayName),r.a.createElement(z,{isLoading:f.includes(e.userId),isDisabled:f.includes(e.userId),variantColor:"orange.300",onClick:function(){return h(e.userId)}},r.a.createElement(d.a,{w:"32px",h:"32px",mr:2},r.a.createElement("img",{src:"/icons/swords.svg",alt:""})),r.a.createElement(I.a,{fontSize:"1.25rem",fontWeight:"700",color:"white",textShadow:"1px 1px 0px rgba(0,0,0,0.2)"},"Challenge")))})))},ze=function(e){var t=e.game,n=Object(a.useContext)(x),c=n.user,o=n.displayName;return r.a.createElement(k.a,{key:t.id,mb:4,p:4,borderRadius:"lg",bg:"purple.700"},r.a.createElement(f.a,{flexWrap:"wrap",justifyContent:"space-between"},r.a.createElement(d.a,null,r.a.createElement(I.a,{fontSize:"0.75rem"},o),t.hits&&r.a.createElement(pe,{isOpponent:!1,hits:t.hits[c.uid].flatMap((function(e){return e.hits}))})),r.a.createElement(d.a,{ml:"auto",textAlign:"right"},r.a.createElement(I.a,{fontSize:"0.75rem"},t.opponentName||t.opponent),t.hits&&r.a.createElement(pe,{isOpponent:!0,hits:t.hits[t.opponent].flatMap((function(e){return e.hits}))}))),r.a.createElement(v.b,{to:"/game/".concat(t.id)},r.a.createElement(z,{mt:4,w:"100%",justifyContent:"center",variantColor:t.currentPlayer===(null===c||void 0===c?void 0:c.uid)?"teal.400":"purple.400"},r.a.createElement(I.a,{whiteSpace:"nowrap",fontSize:"1.25rem",fontWeight:"700",color:"white",textShadow:"1px 1px 0px rgba(0,0,0,0.2)"},t.currentPlayer===(null===c||void 0===c?void 0:c.uid)?"Your turn":"PLAYING"===t.state?"View game":"Place ships"))))},De=function(){var e=Object(a.useContext)(x).user,t=Object(a.useRef)([]),n=Object(a.useState)([]),c=Object(s.a)(n,2),o=c[0],i=c[1];Object(a.useEffect)((function(){if(e){var n=y.collection("users").doc(null===e||void 0===e?void 0:e.uid).collection("games").onSnapshot((function(e){e.docChanges().forEach((function(e){var n=e.doc;if("added"===e.type){var a=Object(C.a)({},n.data(),{id:n.id});t.current=[].concat(Object(w.a)(t.current),[a])}if("modified"===e.type){var r=n.id;t.current=t.current.map((function(e){return e.id!==r?e:Object(C.a)({},n.data(),{id:n.id})}))}if("removed"===e.type){var c=n.id;t.current=t.current.filter((function(e){return e.id!==c}))}})),i(t.current)}));return function(){n()}}}),[e]);var l=o.filter((function(e){return!e.currentPlayer})),u=o.filter((function(e){return"PLAYING"===e.state})),d=o.filter((function(e){return"DONE"===e.state}));return r.a.createElement(k.b,{mt:4},l.length>0&&r.a.createElement(V.a,null,"Not started"),l.map((function(e){return r.a.createElement(ze,{key:e.id,game:e})})),u.length>0&&r.a.createElement(V.a,null,"Playing"),u.map((function(e){return r.a.createElement(ze,{key:e.id,game:e})})),d.length>0&&r.a.createElement(V.a,null,"Finished"),d.map((function(e){return r.a.createElement(ze,{key:e.id,game:e})})))},Re=function(e){var t=e.onStartMatchmaking,n=e.onStopMatchmaking,c=e.isMatchmaking,o=e.time,i=Object(a.useContext)(x),l=i.displayName,u=i.friendCode,s=Object(m.g)();return r.a.createElement(re.a,{maxW:"1200px",margin:"0 auto",templateColumns:{base:"1fr",md:"2fr 1fr"},p:4,gridGap:6},r.a.createElement(d.a,{bg:"purple.800",p:4,rounded:"lg",boxShadow:"0px 0px 0px 8px #6B46C1"},c?r.a.createElement(z,{w:"100%",justifyContent:"center",variantColor:"teal.400",onClick:n},r.a.createElement(I.a,{fontSize:"1.25rem",fontWeight:"700",color:"white",textShadow:"1px 1px 0px rgba(0,0,0,0.2)"},"Searching for opponent ... ",o)):r.a.createElement(z,{w:"100%",justifyContent:"center",variantColor:"teal.400",onClick:t},r.a.createElement(I.a,{fontSize:"1.25rem",fontWeight:"700",color:"white",textShadow:"1px 1px 0px rgba(0,0,0,0.2)"},"Search for opponent")),r.a.createElement(De,null)),r.a.createElement(d.a,{bg:"purple.800",p:4,rounded:"lg",boxShadow:"0px 0px 0px 8px #6B46C1"},r.a.createElement(V.a,null,l),r.a.createElement(V.a,{size:"md"},"Friend code: ",r.a.createElement("span",{style:{WebkitUserSelect:"all"}},u)),r.a.createElement(d.a,{py:2},r.a.createElement(Ie.a,{bg:"purple.500",border:"none",value:"https://fireships.fun/add/".concat(u)}),r.a.createElement(I.a,{fontSize:"0.75rem"},"Send this link to friends so they can add you easier")),r.a.createElement(V.a,{mt:8,mb:2,size:"md",fontWeight:"900",textShadow:"1px 1px 0px rgba(0,0,0,0.4)",letterSpacing:"1px"},"Friends"),r.a.createElement(We,null),r.a.createElement(V.a,{mt:8,mb:2,size:"md",fontWeight:"900",textShadow:"1px 1px 0px rgba(0,0,0,0.4)",letterSpacing:"1px"},"Add new friends"),r.a.createElement(Ae,{friendCode:s.friendCode})))},Pe=n(51),Be=n(156),Ne=n(157),Le=function(){var e=Object(a.useState)(""),t=Object(s.a)(e,2),n=t[0],c=t[1],o=Object(a.useState)(""),i=Object(s.a)(o,2),p=i[0],m=i[1],b=Object(a.useState)(),h=Object(s.a)(b,2),v=h[0],x=h[1],g=Object(a.useState)(!1),E=Object(s.a)(g,2),y=E[0],O=E[1],w=function(){var e=Object(u.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,O(!0),e.next=5,j.signInWithEmailAndPassword(n,p);case 5:x(void 0),O(!1),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),x(e.t0),O(!1);case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}(),C=function(){var e=Object(u.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,j.signInAnonymously();case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.error(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(f.a,{align:"center",justify:"center",w:"100%",minH:"100vh",bg:"purple.600"},r.a.createElement(f.a,{direction:"column"},r.a.createElement(z,{onClick:C,variantColor:"orange.400",p:8,fontSize:"2rem",color:"white"},"Click to play"),r.a.createElement(d.a,{as:"form",mt:12,onSubmit:w},r.a.createElement(Pe.a,{isInvalid:!!v},r.a.createElement(Be.a,{htmlFor:"email"},"Email"),r.a.createElement(Ie.a,{name:"email",placeholder:"E-mail",value:n,onChange:function(e){return c(e.target.value)}}),r.a.createElement(Be.a,{htmlFor:"password"},"Password"),r.a.createElement(Ie.a,{name:"password",type:"password",placeholder:"Password",value:p,onChange:function(e){return m(e.target.value)}}),r.a.createElement(Ne.a,null,v&&v.message)),r.a.createElement(ce.a,{mt:4,variantColor:"teal",isLoading:y,type:"submit"},"Sign in with email/password"))))},Fe=n(158),_e=n(35),qe=function(){return r.a.createElement(f.a,{align:"center",justify:"center",flexWrap:"wrap",pt:8},r.a.createElement(f.a,{flexDir:"column",p:4},r.a.createElement(V.a,{size:"md"},"BETA"),r.a.createElement(I.a,{maxW:"400px"},"This game is currently in a public beta, and that means stuff might be a little unstable and any game or user data may be reset at any time.")),r.a.createElement(f.a,{flexDir:"column",p:4},r.a.createElement(V.a,{size:"md"},"Got feedback?"),r.a.createElement(I.a,{maxW:"400px"},"Please join our"," ",r.a.createElement(Fe.a,{textDecoration:"underline",color:"purple.100",href:"http://discord.gg/vjWAPvC",isExternal:!0},"Discord ",r.a.createElement(_e.a,{name:"external-link",mx:"2px"}))," ","and give your feedback in the #beta-feedback channel.")),r.a.createElement(f.a,{flexDir:"column",p:4},r.a.createElement(V.a,{size:"md"},"Developed live on Twitch"),r.a.createElement(I.a,{maxW:"400px",mb:2},"If you would like to see how this game develops, please checkout our"," ",r.a.createElement(Fe.a,{textDecoration:"underline",color:"purple.100",href:"https://twitch.tv/codepurpl",isExternal:!0},"Twitch stream. ",r.a.createElement(_e.a,{name:"external-link",mx:"2px"}))),"Copyright \xa9 2020 - Purpl AS"))},Te=new te,Ue=function(){var e=Object(a.useState)(null),t=Object(s.a)(e,2),n=t[0],c=t[1],o=Object(a.useRef)(),i=Object(a.useRef)(),f=Object(m.f)(),b=Object(a.useState)(0),h=Object(s.a)(b,2),v=h[0],g=h[1],E=Object(a.useState)(!1),O=Object(s.a)(E,2),w=O[0],C=O[1],S=Object(a.useState)(!0),k=Object(s.a)(S,2),I=k[0],M=k[1],A=function(){var e=Object(u.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=2;break}return e.abrupt("return");case 2:return C(!0),W(),e.next=6,Te.joinQueue(n.uid);case 6:Te.subMatchmaking(n.uid,(function(e){var t,n;(null===(t=e.data())||void 0===t?void 0:t.gameId)&&(z(),f.push("/game/".concat(null===(n=e.data())||void 0===n?void 0:n.gameId)))}),(function(e){console.error(e)}));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),W=function(){o.current=setInterval((function(){g((function(e){return e+1}))}),1e3)},z=function(){n&&(C(!1),function(e){e.current&&clearInterval(e.current)}(o),g(0),i.current&&i.current(),Te.exitQueue(n.uid))};Object(a.useEffect)((function(){var e=j.onAuthStateChanged(function(){var e=Object(u.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c(t||null),M(!1);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());return function(){e(),Te.unsubMatchmaking()}}),[]);var D=Object(a.useState)({}),R=Object(s.a)(D,2),P=R[0],B=R[1];return Object(a.useEffect)((function(){if(n){var e=y.collection("users").doc(null===n||void 0===n?void 0:n.uid).onSnapshot((function(e){e.exists&&B(e.data())}));return function(){e()}}}),[n]),I?r.a.createElement(d.a,{as:"main",h:"100vh",overflow:"auto",bg:"gray.900",color:"white"},r.a.createElement(p.a,{color:"white",position:"absolute",top:"50%",left:"50%",transform:"translate3d(-50%, -50%, 0)",size:"xl"})):n?r.a.createElement(x.Provider,{value:{user:n,displayName:P.displayName||"",friendCode:P.friendCode||""}},r.a.createElement(d.a,{as:"main",h:"100vh",overflow:"auto",background:"linear-gradient(152deg, #6B46C1 0%, #553C9A 100%)",color:"white"},r.a.createElement($,null),r.a.createElement(m.c,null,r.a.createElement(m.a,{path:"/game/:gameId"},r.a.createElement(ke,null)),r.a.createElement(m.a,{path:"/add/:friendCode"},r.a.createElement(Re,{onStartMatchmaking:A,onStopMatchmaking:z,isMatchmaking:w,time:v})),r.a.createElement(m.a,{path:"/"},r.a.createElement(Re,{onStartMatchmaking:A,onStopMatchmaking:z,isMatchmaking:w,time:v}))),r.a.createElement(qe,null))):r.a.createElement(Le,null)},Ye=n(20),Ge=n(15),He=n(166),Qe=n(160),Je=Object(C.a)({},Qe.a,{fonts:{heading:'\'Nunito\', -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"',body:'\'Nunito\', -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"',mono:'SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace'}});o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(Ye.a,{theme:Je},r.a.createElement(Ge.a,{value:"light"},r.a.createElement(He.a,null),r.a.createElement(v.a,null,r.a.createElement(Ue,null))))),document.getElementById("root"))},61:function(e,t,n){e.exports=n.p+"static/media/notification1.0cae592a.wav"},62:function(e,t,n){e.exports=n.p+"static/media/accepted.1fcf8c00.wav"},63:function(e,t,n){e.exports=n.p+"static/media/decline.08953c16.wav"},92:function(e,t,n){e.exports=n.p+"static/media/notification3.0e9986fb.wav"},93:function(e,t,n){e.exports=n.p+"static/media/hit.9a9c4d64.wav"},94:function(e,t,n){e.exports=n.p+"static/media/miss.f7553dc9.wav"},95:function(e,t,n){e.exports=n.p+"static/media/notallowed.f8d95f31.wav"}},[[101,1,2]]]);
//# sourceMappingURL=main.7371ac9a.chunk.js.map